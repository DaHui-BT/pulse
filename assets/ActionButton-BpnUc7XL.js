import{bf as b,Z as p,ad as c,k as y,d as B,o as F,bh as O,c as P,a as d,V as $}from"./index-CIROPUZn.js";import{c as M,B as T}from"./index-B7ieXy98.js";const x=new p("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),D=new p("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),N=function(e){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:f}=e,o=`${f}-fade`,i=s?"&":"";return[b(o,x,D,e.motionDurationMid,s),{[`
        ${i}${o}-enter,
        ${i}${o}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${i}${o}-leave`]:{animationTimingFunction:"linear"}}]},R=()=>{const e=c(!1);return y(()=>{e.value=!0}),e},w={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:$(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function g(e){return!!(e&&e.then)}const V=B({compatConfig:{MODE:3},name:"ActionButton",props:w,setup(e,s){let{slots:f}=s;const o=c(!1),i=c(),u=c(!1);let m;const v=R();F(()=>{e.autofocus&&(m=setTimeout(()=>{var t,n;return(n=(t=O(i.value))===null||t===void 0?void 0:t.focus)===null||n===void 0?void 0:n.call(t)}))}),y(()=>{clearTimeout(m)});const l=function(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];(t=e.close)===null||t===void 0||t.call(e,...a)},h=t=>{g(t)&&(u.value=!0,t.then(function(){v.value||(u.value=!1),l(...arguments),o.value=!1},n=>(v.value||(u.value=!1),o.value=!1,Promise.reject(n))))},C=t=>{const{actionFn:n}=e;if(o.value)return;if(o.value=!0,!n){l();return}let a;if(e.emitEvent){if(a=n(t),e.quitOnNullishReturnValue&&!g(a)){o.value=!1,l(t);return}}else if(n.length)a=n(e.close),o.value=!1;else if(a=n(),!a){l();return}h(a)};return()=>{const{type:t,prefixCls:n,buttonProps:a}=e;return P(T,d(d(d({},M(t)),{},{onClick:C,loading:u.value,prefixCls:n},a),{},{ref:i}),f)}}});export{V as A,N as i,R as u};
