var Ge=Object.defineProperty;var qe=(e,t,n)=>t in e?Ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ce=(e,t,n)=>qe(e,typeof t!="symbol"?t+"":t,n);import{d as U,J as K,$ as oe,b as o,z,a1 as q,p as de,aY as Ue,aZ as Ye,G as le,H as pe,y as P,I as Se,P as Je,aq as se,a_ as Le,a$ as Ze,aC as Ke,O as fe,x as G,a3 as Ee,ak as Ae,a6 as Qe,ap as je,aI as et,aR as Q,ah as tt,b0 as nt,b1 as at,D as rt,b2 as ot,A as H,am as it,an as lt,Y as st,b3 as ct,b4 as ut,b5 as dt,n as ee,s as mt,ao as pt,b6 as ft,b7 as Ie,B as ke,a2 as gt,a as te,o as D,aS as V,w as T,e as Y,t as ne,b8 as vt,c as ie,F as he,g as be,b9 as ht,E as bt,ar as _t,r as ve,U as yt,as as J,ba as St,f as ue,aT as ze,at as Ct,bb as xt,av as $t,aW as wt,h as Bt}from"./index-CTDVunXl.js";import{A as Tt,T as Pt}from"./ArticleService-DT3mPpkO.js";import{U as Ot}from"./UserService-DvkFWkZV.js";import{u as At,A as Ce,S as It,P as zt,a as Ht,I as Rt,C as Dt,O as He}from"./interaction-BwIKDvV2.js";import{R as Mt,S as Nt}from"./request-CsgQfykI.js";import{h as Re,T as Lt}from"./moment-DRYRg-Yt.js";import{o as Et,T as jt,u as kt}from"./transButton-B_3iRSm2.js";import{D as Ft}from"./DownOutlined-B4g5vT8z.js";import{_ as Xt}from"./FormItem-CE4zAPqe.js";var Wt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};const Vt=()=>({prefixCls:String,href:String,separator:q.any,dropdownProps:de(),overlay:q.any,onClick:Ue()}),me=U({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:Vt(),slots:Object,setup(e,t){let{slots:n,attrs:a,emit:r}=t;const{prefixCls:m}=K("breadcrumb",e),h=(S,C)=>{const b=oe(n,e,"overlay");return b?o(Ye,z(z({},e.dropdownProps),{},{overlay:b,placement:"bottom"}),{default:()=>[o("span",{class:`${C}-overlay-link`},[S,o(Ft,null,null)])]}):S},v=S=>{r("click",S)};return()=>{var S;const C=(S=oe(n,e,"separator"))!==null&&S!==void 0?S:"/",b=oe(n,e),{class:l,style:p}=a,c=Wt(a,["class","style"]);let x;return e.href!==void 0?x=o("a",z({class:`${m.value}-link`,onClick:v},c),[b]):x=o("span",z({class:`${m.value}-link`,onClick:v},c),[b]),x=h(x,m.value),b!=null?o("li",{class:l,style:p},[x,C&&o("span",{class:`${m.value}-separator`},[C])]):null}}}),Gt=e=>{const{componentCls:t,iconCls:n}=e;return{[t]:P(P({},Se(e)),{color:e.breadcrumbBaseColor,fontSize:e.breadcrumbFontSize,[n]:{fontSize:e.breadcrumbIconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:P({color:e.breadcrumbLinkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${e.paddingXXS}px`,borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",marginInline:-e.marginXXS,"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover}},Je(e)),"li:last-child":{color:e.breadcrumbLastItemColor,[`& > ${t}-separator`]:{display:"none"}},[`${t}-separator`]:{marginInline:e.breadcrumbSeparatorMargin,color:e.breadcrumbSeparatorColor},[`${t}-link`]:{[`
          > ${n} + span,
          > ${n} + a
        `]:{marginInlineStart:e.marginXXS}},[`${t}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",padding:`0 ${e.paddingXXS}px`,marginInline:-e.marginXXS,[`> ${n}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover,a:{color:e.breadcrumbLinkColorHover}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},qt=le("Breadcrumb",e=>{const t=pe(e,{breadcrumbBaseColor:e.colorTextDescription,breadcrumbFontSize:e.fontSize,breadcrumbIconFontSize:e.fontSize,breadcrumbLinkColor:e.colorTextDescription,breadcrumbLinkColorHover:e.colorText,breadcrumbLastItemColor:e.colorText,breadcrumbSeparatorMargin:e.marginXS,breadcrumbSeparatorColor:e.colorTextDescription});return[Gt(t)]}),Ut=()=>({prefixCls:String,routes:{type:Array},params:q.any,separator:q.any,itemRender:{type:Function}});function Yt(e,t){if(!e.breadcrumbName)return null;const n=Object.keys(t).join("|");return e.breadcrumbName.replace(new RegExp(`:(${n})`,"g"),(r,m)=>t[m]||r)}function De(e){const{route:t,params:n,routes:a,paths:r}=e,m=a.indexOf(t)===a.length-1,h=Yt(t,n);return m?o("span",null,[h]):o("a",{href:`#/${r.join("/")}`},[h])}const ae=U({compatConfig:{MODE:3},name:"ABreadcrumb",inheritAttrs:!1,props:Ut(),slots:Object,setup(e,t){let{slots:n,attrs:a}=t;const{prefixCls:r,direction:m}=K("breadcrumb",e),[h,v]=qt(r),S=(l,p)=>(l=(l||"").replace(/^\//,""),Object.keys(p).forEach(c=>{l=l.replace(`:${c}`,p[c])}),l),C=(l,p,c)=>{const x=[...l],_=S(p||"",c);return _&&x.push(_),x},b=l=>{let{routes:p=[],params:c={},separator:x,itemRender:_=De}=l;const w=[];return p.map(O=>{const A=S(O.path,c);A&&w.push(A);const B=[...w];let s=null;O.children&&O.children.length&&(s=o(Ke,{items:O.children.map(i=>({key:i.path||i.breadcrumbName,label:_({route:i,params:c,routes:p,paths:C(B,i.path,c)})}))},null));const u={separator:x};return s&&(u.overlay=s),o(me,z(z({},u),{},{key:A||O.breadcrumbName}),{default:()=>[_({route:O,params:c,routes:p,paths:B})]})})};return()=>{var l;let p;const{routes:c,params:x={}}=e,_=se(oe(n,e)),w=(l=oe(n,e,"separator"))!==null&&l!==void 0?l:"/",O=e.itemRender||n.itemRender||De;c&&c.length>0?p=b({routes:c,params:x,separator:w,itemRender:O}):_.length&&(p=_.map((B,s)=>(Le(typeof B.type=="object"&&(B.type.__ANT_BREADCRUMB_ITEM||B.type.__ANT_BREADCRUMB_SEPARATOR)),Ze(B,{separator:w,key:s}))));const A={[r.value]:!0,[`${r.value}-rtl`]:m.value==="rtl",[`${a.class}`]:!!a.class,[v.value]:!0};return h(o("nav",z(z({},a),{},{class:A}),[o("ol",null,[p])]))}}});var Jt=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};const Zt=()=>({prefixCls:String}),_e=U({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Zt(),setup(e,t){let{slots:n,attrs:a}=t;const{prefixCls:r}=K("breadcrumb",e);return()=>{var m;const{separator:h,class:v}=a,S=Jt(a,["separator","class"]),C=se((m=n.default)===null||m===void 0?void 0:m.call(n));return o("span",z({class:[`${r.value}-separator`,v]},S),[C.length>0?C:"/"])}}});ae.Item=me;ae.Separator=_e;ae.install=function(e){return e.component(ae.name,ae),e.component(me.name,me),e.component(_e.name,_e),e};const Kt=e=>{const{componentCls:t,commentBg:n,commentPaddingBase:a,commentNestIndent:r,commentFontSizeBase:m,commentFontSizeSm:h,commentAuthorNameColor:v,commentAuthorTimeColor:S,commentActionColor:C,commentActionHoverColor:b,commentActionsMarginBottom:l,commentActionsMarginTop:p,commentContentDetailPMarginBottom:c}=e;return{[t]:{position:"relative",backgroundColor:n,[`${t}-inner`]:{display:"flex",padding:a},[`${t}-avatar`]:{position:"relative",flexShrink:0,marginRight:e.marginSM,cursor:"pointer",img:{width:"32px",height:"32px",borderRadius:"50%"}},[`${t}-content`]:{position:"relative",flex:"1 1 auto",minWidth:"1px",fontSize:m,wordWrap:"break-word","&-author":{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",marginBottom:e.marginXXS,fontSize:m,"& > a,& > span":{paddingRight:e.paddingXS,fontSize:h,lineHeight:"18px"},"&-name":{color:v,fontSize:m,transition:`color ${e.motionDurationSlow}`,"> *":{color:v,"&:hover":{color:v}}},"&-time":{color:S,whiteSpace:"nowrap",cursor:"auto"}},"&-detail p":{marginBottom:c,whiteSpace:"pre-wrap"}},[`${t}-actions`]:{marginTop:p,marginBottom:l,paddingLeft:0,"> li":{display:"inline-block",color:C,"> span":{marginRight:"10px",color:C,fontSize:h,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,userSelect:"none","&:hover":{color:b}}}},[`${t}-nested`]:{marginLeft:r},"&-rtl":{direction:"rtl"}}}},Qt=le("Comment",e=>{const t=pe(e,{commentBg:"inherit",commentPaddingBase:`${e.paddingMD}px 0`,commentNestIndent:"44px",commentFontSizeBase:e.fontSize,commentFontSizeSm:e.fontSizeSM,commentAuthorNameColor:e.colorTextTertiary,commentAuthorTimeColor:e.colorTextPlaceholder,commentActionColor:e.colorTextTertiary,commentActionHoverColor:e.colorTextSecondary,commentActionsMarginBottom:"inherit",commentActionsMarginTop:e.marginSM,commentContentDetailPMarginBottom:"inherit"});return[Kt(t)]}),en=()=>({actions:Array,author:q.any,avatar:q.any,content:q.any,prefixCls:String,datetime:q.any}),tn=U({compatConfig:{MODE:3},name:"AComment",inheritAttrs:!1,props:en(),slots:Object,setup(e,t){let{slots:n,attrs:a}=t;const{prefixCls:r,direction:m}=K("comment",e),[h,v]=Qt(r),S=(b,l)=>o("div",{class:`${b}-nested`},[l]),C=b=>!b||!b.length?null:b.map((p,c)=>o("li",{key:`action-${c}`},[p]));return()=>{var b,l,p,c,x,_,w,O,A,B,s;const u=r.value,i=(b=e.actions)!==null&&b!==void 0?b:(l=n.actions)===null||l===void 0?void 0:l.call(n),f=(p=e.author)!==null&&p!==void 0?p:(c=n.author)===null||c===void 0?void 0:c.call(n),I=(x=e.avatar)!==null&&x!==void 0?x:(_=n.avatar)===null||_===void 0?void 0:_.call(n),R=(w=e.content)!==null&&w!==void 0?w:(O=n.content)===null||O===void 0?void 0:O.call(n),M=(A=e.datetime)!==null&&A!==void 0?A:(B=n.datetime)===null||B===void 0?void 0:B.call(n),L=o("div",{class:`${u}-avatar`},[typeof I=="string"?o("img",{src:I,alt:"comment-avatar"},null):I]),j=i?o("ul",{class:`${u}-actions`},[C(Array.isArray(i)?i:[i])]):null,k=o("div",{class:`${u}-content-author`},[f&&o("span",{class:`${u}-content-author-name`},[f]),M&&o("span",{class:`${u}-content-author-time`},[M])]),N=o("div",{class:`${u}-content`},[k,o("div",{class:`${u}-content-detail`},[R]),j]),$=o("div",{class:`${u}-inner`},[L,N]),g=se((s=n.default)===null||s===void 0?void 0:s.call(n));return h(o("div",z(z({},a),{},{class:[u,{[`${u}-rtl`]:m.value==="rtl"},a.class,v.value]}),[$,g&&g.length?S(u,g):null]))}}}),Fe=fe(tn),nn=e=>{const{componentCls:t,sizePaddingEdgeHorizontal:n,colorSplit:a,lineWidth:r}=e;return{[t]:P(P({},Se(e)),{borderBlockStart:`${r}px solid ${a}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${e.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${r}px solid ${a}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${e.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${t}-with-text`]:{display:"flex",alignItems:"center",margin:`${e.dividerHorizontalWithTextGutterMargin}px 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${a}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${r}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${t}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${t}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${t}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:`${r}px 0 0`},[`&-horizontal${t}-with-text${t}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${t}-dashed`]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${t}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${t}-with-text-left${t}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${t}-inner-text`]:{paddingInlineStart:n}},[`&-horizontal${t}-with-text-right${t}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${t}-inner-text`]:{paddingInlineEnd:n}}})}},an=le("Divider",e=>{const t=pe(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[nn(t)]},{sizePaddingEdgeHorizontal:0}),rn=()=>({prefixCls:String,type:{type:String,default:"horizontal"},dashed:{type:Boolean,default:!1},orientation:{type:String,default:"center"},plain:{type:Boolean,default:!1},orientationMargin:[String,Number]}),on=U({name:"ADivider",inheritAttrs:!1,compatConfig:{MODE:3},props:rn(),setup(e,t){let{slots:n,attrs:a}=t;const{prefixCls:r,direction:m}=K("divider",e),[h,v]=an(r),S=G(()=>e.orientation==="left"&&e.orientationMargin!=null),C=G(()=>e.orientation==="right"&&e.orientationMargin!=null),b=G(()=>{const{type:c,dashed:x,plain:_}=e,w=r.value;return{[w]:!0,[v.value]:!!v.value,[`${w}-${c}`]:!0,[`${w}-dashed`]:!!x,[`${w}-plain`]:!!_,[`${w}-rtl`]:m.value==="rtl",[`${w}-no-default-orientation-margin-left`]:S.value,[`${w}-no-default-orientation-margin-right`]:C.value}}),l=G(()=>{const c=typeof e.orientationMargin=="number"?`${e.orientationMargin}px`:e.orientationMargin;return P(P({},S.value&&{marginLeft:c}),C.value&&{marginRight:c})}),p=G(()=>e.orientation.length>0?"-"+e.orientation:e.orientation);return()=>{var c;const x=se((c=n.default)===null||c===void 0?void 0:c.call(n));return h(o("div",z(z({},a),{},{class:[b.value,x.length?`${r.value}-with-text ${r.value}-with-text${p.value}`:"",a.class],role:"separator"}),[x.length?o("span",{class:`${r.value}-inner-text`,style:l.value},[x]):null]))}}}),ln=fe(on);var sn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};function Me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),a.forEach(function(r){cn(e,r,n[r])})}return e}function cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=function(t,n){var a=Me({},t,n.attrs);return o(Ee,Me({},a,{icon:sn}),null)};xe.displayName="ArrowLeftOutlined";xe.inheritAttrs=!1;var un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};function Ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},a=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable}))),a.forEach(function(r){dn(e,r,n[r])})}return e}function dn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e=function(t,n){var a=Ne({},t,n.attrs);return o(Ee,Ne({},a,{icon:un}),null)};$e.displayName="ArrowRightOutlined";$e.inheritAttrs=!1;const mn=e=>{const{componentCls:t,antCls:n}=e;return{[t]:P(P({},Se(e)),{position:"relative",padding:`${e.pageHeaderPaddingVertical}px ${e.pageHeaderPadding}px`,backgroundColor:e.colorBgContainer,[`&${t}-ghost`]:{backgroundColor:e.pageHeaderGhostBg},"&.has-footer":{paddingBottom:0},[`${t}-back`]:{marginRight:e.marginMD,fontSize:e.fontSizeLG,lineHeight:1,"&-button":P(P({},Et(e)),{color:e.pageHeaderBackColor,cursor:"pointer"})},[`${n}-divider-vertical`]:{height:"14px",margin:`0 ${e.marginSM}`,verticalAlign:"middle"},[`${n}-breadcrumb + &-heading`]:{marginTop:e.marginXS},[`${t}-heading`]:{display:"flex",justifyContent:"space-between","&-left":{display:"flex",alignItems:"center",margin:`${e.marginXS/2}px 0`,overflow:"hidden"},"&-title":P({marginRight:e.marginSM,marginBottom:0,color:e.colorTextHeading,fontWeight:600,fontSize:e.pageHeaderHeadingTitle,lineHeight:`${e.controlHeight}px`},Ae),[`${n}-avatar`]:{marginRight:e.marginSM},"&-sub-title":P({marginRight:e.marginSM,color:e.colorTextDescription,fontSize:e.pageHeaderHeadingSubTitle,lineHeight:e.lineHeight},Ae),"&-extra":{margin:`${e.marginXS/2}px 0`,whiteSpace:"nowrap","> *":{marginLeft:e.marginSM,whiteSpace:"unset"},"> *:first-child":{marginLeft:0}}},[`${t}-content`]:{paddingTop:e.pageHeaderContentPaddingVertical},[`${t}-footer`]:{marginTop:e.marginMD,[`${n}-tabs`]:{[`> ${n}-tabs-nav`]:{margin:0,"&::before":{border:"none"}},[`${n}-tabs-tab`]:{paddingTop:e.paddingXS,paddingBottom:e.paddingXS,fontSize:e.pageHeaderTabFontSize}}},[`${t}-compact ${t}-heading`]:{flexWrap:"wrap"},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},pn=le("PageHeader",e=>{const t=pe(e,{pageHeaderPadding:e.paddingLG,pageHeaderPaddingVertical:e.paddingMD,pageHeaderPaddingBreadcrumb:e.paddingSM,pageHeaderContentPaddingVertical:e.paddingSM,pageHeaderBackColor:e.colorTextBase,pageHeaderGhostBg:"transparent",pageHeaderHeadingTitle:e.fontSizeHeading4,pageHeaderHeadingSubTitle:e.fontSize,pageHeaderTabFontSize:e.fontSizeLG});return[mn(t)]}),fn=()=>({backIcon:Q(),prefixCls:String,title:Q(),subTitle:Q(),breadcrumb:q.object,tags:Q(),footer:Q(),extra:Q(),avatar:de(),ghost:{type:Boolean,default:void 0},onBack:Function}),gn=U({compatConfig:{MODE:3},name:"APageHeader",inheritAttrs:!1,props:fn(),slots:Object,setup(e,t){let{emit:n,slots:a,attrs:r}=t;const{prefixCls:m,direction:h,pageHeader:v}=K("page-header",e),[S,C]=pn(m),b=Qe(!1),l=At(),p=s=>{let{width:u}=s;l.value||(b.value=u<768)},c=G(()=>{var s,u,i;return(i=(s=e.ghost)!==null&&s!==void 0?s:(u=v==null?void 0:v.value)===null||u===void 0?void 0:u.ghost)!==null&&i!==void 0?i:!0}),x=()=>{var s,u,i;return(i=(s=e.backIcon)!==null&&s!==void 0?s:(u=a.backIcon)===null||u===void 0?void 0:u.call(a))!==null&&i!==void 0?i:h.value==="rtl"?o($e,null,null):o(xe,null,null)},_=s=>!s||!e.onBack?null:o(at,{componentName:"PageHeader",children:u=>{let{back:i}=u;return o("div",{class:`${m.value}-back`},[o(jt,{onClick:f=>{n("back",f)},class:`${m.value}-back-button`,"aria-label":i},{default:()=>[s]})])}},null),w=()=>{var s;return e.breadcrumb?o(ae,e.breadcrumb,null):(s=a.breadcrumb)===null||s===void 0?void 0:s.call(a)},O=()=>{var s,u,i,f,I,R,M,L,j;const{avatar:k}=e,N=(s=e.title)!==null&&s!==void 0?s:(u=a.title)===null||u===void 0?void 0:u.call(a),$=(i=e.subTitle)!==null&&i!==void 0?i:(f=a.subTitle)===null||f===void 0?void 0:f.call(a),g=(I=e.tags)!==null&&I!==void 0?I:(R=a.tags)===null||R===void 0?void 0:R.call(a),d=(M=e.extra)!==null&&M!==void 0?M:(L=a.extra)===null||L===void 0?void 0:L.call(a),y=`${m.value}-heading`,F=N||$||g||d;if(!F)return null;const W=x(),E=_(W);return o("div",{class:y},[(E||k||F)&&o("div",{class:`${y}-left`},[E,k?o(Ce,k,null):(j=a.avatar)===null||j===void 0?void 0:j.call(a),N&&o("span",{class:`${y}-title`,title:typeof N=="string"?N:void 0},[N]),$&&o("span",{class:`${y}-sub-title`,title:typeof $=="string"?$:void 0},[$]),g&&o("span",{class:`${y}-tags`},[g])]),d&&o("span",{class:`${y}-extra`},[o(It,null,{default:()=>[d]})])])},A=()=>{var s,u;const i=(s=e.footer)!==null&&s!==void 0?s:tt((u=a.footer)===null||u===void 0?void 0:u.call(a));return nt(i)?null:o("div",{class:`${m.value}-footer`},[i])},B=s=>o("div",{class:`${m.value}-content`},[s]);return()=>{var s,u;const i=((s=e.breadcrumb)===null||s===void 0?void 0:s.routes)||a.breadcrumb,f=e.footer||a.footer,I=se((u=a.default)===null||u===void 0?void 0:u.call(a)),R=je(m.value,{"has-breadcrumb":i,"has-footer":f,[`${m.value}-ghost`]:c.value,[`${m.value}-rtl`]:h.value==="rtl",[`${m.value}-compact`]:b.value},r.class,C.value);return S(o(et,{onResize:p},{default:()=>[o("div",z(z({},r),{},{class:R}),[w(),O(),I.length?B(I):null,A()])]}))}}}),vn=fe(gn),hn=e=>{const{componentCls:t,iconCls:n,zIndexPopup:a,colorText:r,colorWarning:m,marginXS:h,fontSize:v,fontWeightStrong:S,lineHeight:C}=e;return{[t]:{zIndex:a,[`${t}-inner-content`]:{color:r},[`${t}-message`]:{position:"relative",marginBottom:h,color:r,fontSize:v,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${t}-message-icon ${n}`]:{color:m,fontSize:v,flex:"none",lineHeight:1,paddingTop:(Math.round(v*C)-v)/2},"&-title":{flex:"auto",marginInlineStart:h},"&-title-only":{fontWeight:S}},[`${t}-description`]:{position:"relative",marginInlineStart:v+h,marginBottom:h,color:r,fontSize:v},[`${t}-buttons`]:{textAlign:"end",button:{marginInlineStart:h}}}}},bn=le("Popconfirm",e=>hn(e),e=>{const{zIndexPopupBase:t}=e;return{zIndexPopup:t+60}});var _n=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n};const yn=()=>P(P({},dt()),{prefixCls:String,content:ee(),title:ee(),description:ee(),okType:mt("primary"),disabled:{type:Boolean,default:!1},okText:ee(),cancelText:ee(),icon:ee(),okButtonProps:de(),cancelButtonProps:de(),showCancel:{type:Boolean,default:!0},onConfirm:Function,onCancel:Function}),Sn=U({compatConfig:{MODE:3},name:"APopconfirm",inheritAttrs:!1,props:rt(yn(),P(P({},ot()),{trigger:"click",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0,okType:"primary",disabled:!1})),slots:Object,setup(e,t){let{slots:n,emit:a,expose:r,attrs:m}=t;const h=H();Le(e.visible===void 0),r({getPopupDomNode:()=>{var i,f;return(f=(i=h.value)===null||i===void 0?void 0:i.getPopupDomNode)===null||f===void 0?void 0:f.call(i)}});const[v,S]=kt(!1,{value:it(e,"open")}),C=(i,f)=>{e.open===void 0&&S(i),a("update:open",i),a("openChange",i,f)},b=i=>{C(!1,i)},l=i=>{var f;return(f=e.onConfirm)===null||f===void 0?void 0:f.call(e,i)},p=i=>{var f;C(!1,i),(f=e.onCancel)===null||f===void 0||f.call(e,i)},c=i=>{i.keyCode===gt.ESC&&v&&C(!1,i)},x=i=>{const{disabled:f}=e;f||C(i)},{prefixCls:_,getPrefixCls:w}=K("popconfirm",e),O=G(()=>w()),A=G(()=>w("btn")),[B]=bn(_),[s]=lt("Popconfirm",pt.Popconfirm),u=()=>{var i,f,I,R,M;const{okButtonProps:L,cancelButtonProps:j,title:k=(i=n.title)===null||i===void 0?void 0:i.call(n),description:N=(f=n.description)===null||f===void 0?void 0:f.call(n),cancelText:$=(I=n.cancel)===null||I===void 0?void 0:I.call(n),okText:g=(R=n.okText)===null||R===void 0?void 0:R.call(n),okType:d,icon:y=((M=n.icon)===null||M===void 0?void 0:M.call(n))||o(ft,null,null),showCancel:F=!0}=e,{cancelButton:W,okButton:E}=n,re=P({onClick:p,size:"small"},j),ge=P(P(P({onClick:l},Ie(d)),{size:"small"}),L);return o("div",{class:`${_.value}-inner-content`},[o("div",{class:`${_.value}-message`},[y&&o("span",{class:`${_.value}-message-icon`},[y]),o("div",{class:[`${_.value}-message-title`,{[`${_.value}-message-title-only`]:!!N}]},[k])]),N&&o("div",{class:`${_.value}-description`},[N]),o("div",{class:`${_.value}-buttons`},[F?W?W(re):o(ke,re,{default:()=>[$||s.value.cancelText]}):null,E?E(ge):o(Ht,{buttonProps:P(P({size:"small"},Ie(d)),L),actionFn:l,close:b,prefixCls:A.value,quitOnNullishReturnValue:!0,emitEvent:!0},{default:()=>[g||s.value.okText]})])])};return()=>{var i;const{placement:f,overlayClassName:I,trigger:R="click"}=e,M=_n(e,["placement","overlayClassName","trigger"]),L=st(M,["title","content","cancelText","okText","onUpdate:open","onConfirm","onCancel","prefixCls"]),j=je(_.value,I);return B(o(zt,z(z(z({},L),m),{},{trigger:R,placement:f,onOpenChange:x,open:v.value,overlayClassName:j,transitionName:ut(O.value,"zoom-big",e.transitionName),ref:h,"data-popover-inject":!0}),{default:()=>[ct(((i=n.default)===null||i===void 0?void 0:i.call(n))||[],{onKeydown:k=>{c(k)}},!1)],content:u}))}}}),Cn=fe(Sn),Z=class Z{constructor(){ce(this,"collection","comment");ce(this,"request");this.request=new Mt}static getInstance(){return Z.instance||(Z.instance=new Z),Z.instance}async findCommentById(t){try{const n=await this.request.get(`/comment/${t}`);return n.code==200?{success:!0,data:n.data}:{success:!1,error:n.message}}catch(n){return{success:!1,error:n.message}}}async findComments(t={},n={page:0,pageSize:10}){try{const a=await this.request.get("/comment",{params:t});return a.code==200?{success:!0,data:{comments:a.data,total:1}}:{success:!1,error:a.message}}catch(a){return{success:!1,error:a.message}}}async createComment(t){try{const n=await this.request.post("/comment",{data:t});return n.code==200?{success:!0,data:n.data}:{success:!1,error:n.message}}catch(n){return{success:!1,error:n.message}}}async updateComment(t,n){try{const a=await this.request.put(`/comment/${t}`,{data:n});return a.code==200?{success:!0,data:a.data}:{success:!1,error:a.message}}catch(a){return{success:!1,error:a.message}}}async deleteById(t){try{const n=await this.request.delete(`/comment/${t}`);return n.code==200?{success:!0,data:n.data}:{success:!1,error:n.message}}catch(n){return{success:!1,error:n.message}}}};ce(Z,"instance");let ye=Z;const xn=["href"],$n={key:"comment-basic-like"},wn={style:{"padding-left":"8px",cursor:"auto"}},Bn={key:"comment-basic-dislike"},Tn={style:{"padding-left":"8px",cursor:"auto"}},Pn={key:0},On=U({__name:"Comment",props:{comment:{type:Object,default:{}}},emits:["replay"],setup(e,{emit:t}){const n=t,a=e,r=H(0),m=H(0),h=H(),v=()=>{r.value=1,m.value=0,h.value="liked"},S=()=>{r.value=0,m.value=1,h.value="disliked"};function C(p){console.log(p),n("replay",p)}const b=G(()=>Re(a.comment.updatedAt).format("YYYY-MM-DD: HH-mm-ss")),l=G(()=>Re(a.comment.createdAt).fromNow());return(p,c)=>{const x=Ce,_=bt,w=te("LikeFilled"),O=te("LikeOutlined"),A=te("DislikeFilled"),B=te("DislikeOutlined"),s=te("Comment",!0),u=Fe;return D(),V(u,{class:"comment"},{author:T(()=>{var i,f;return[Y("a",{href:`#/user-info?use_id=${e.comment.author.userId}`},ne((f=(i=e.comment)==null?void 0:i.author)==null?void 0:f.username),9,xn)]}),avatar:T(()=>{var i;return[o(x,{src:(i=e.comment.author)==null?void 0:i.avatar,alt:e.comment.author.username},null,8,["src","alt"])]}),datetime:T(()=>[o(_,{title:b.value},{default:T(()=>[Y("span",null,ne(l.value),1)]),_:1},8,["title"])]),actions:T(()=>[Y("span",$n,[o(_,{title:"Like"},{default:T(()=>[h.value==="liked"?(D(),V(w,{key:0,onClick:v})):(D(),V(O,{key:1,onClick:v}))]),_:1}),Y("span",wn,ne(r.value),1)]),Y("span",Bn,[o(_,{title:"Dislike"},{default:T(()=>[h.value==="disliked"?(D(),V(A,{key:0,onClick:S})):(D(),V(B,{key:1,onClick:S}))]),_:1}),Y("span",Tn,ne(m.value),1)]),Y("span",{key:"comment-nested-reply-to",onClick:c[0]||(c[0]=vt(i=>C(e.comment),["prevent"]))},"Reply to")]),content:T(()=>{var i;return[Y("p",null,ne((i=e.comment)==null?void 0:i.content),1)]}),default:T(()=>[e.comment.children&&e.comment.children.length?(D(),ie("div",Pn,[(D(!0),ie(he,null,be(e.comment.children,i=>(D(),V(s,{key:i._id,comment:i,onReplay:C},null,8,["comment"]))),128))])):ht("",!0)]),_:1})}}}),An={key:0,class:"article-detail"},In=U({__name:"ArticleDetail",setup(e){var N;const t=Ct(),n=xt(),a=_t(),r=H(),m=Ot.getInstance(),h=Tt.getInstance(),v=ye.getInstance(),S=Rt.getInstance(),C=Pt.getInstance(),b=ve([]),l=H(),p=H(),c=ve([]);let x=H(!0),_=H(!0),w=H(!0);const O=ve([{path:"/",breadcrumbName:"Home"},{path:"/article",breadcrumbName:"Article"},{path:"/article-info",breadcrumbName:((N=l.value)==null?void 0:N.title)||""}]),A=H(!1),B=H(""),s=H(),u=H(!1),i=H(!1),f=H("input your comment");yt(async()=>{var $,g;await h.findArticleById(t.query._id+"").then(d=>{var y;if(d.success&&(l.value=d.data||void 0,O[2].breadcrumbName=((y=l.value)==null?void 0:y.title)||""),x.value=!1,!d.success)throw J.error(d.error),new Error(d.error)}).catch(d=>{throw new Error(d.message)}),l.value&&C.findTagByIds(l.value.tags).then(d=>{d.success&&d.data&&(c.splice(0,c.length),c.push(...d.data))}),l.value&&m.findUserById(($=l.value)==null?void 0:$.createdBy).then(d=>{d.success?p.value=d.data:J.error(d.error)}),S.findInteractions({createdBy:a.user._id,documentId:(g=l.value)==null?void 0:g._id,collectionName:Dt.ARTICLE}).then(d=>{var y;d.success?(y=d.data)==null||y.interactions.forEach(F=>{F.operation==He.STAR?u.value=!0:F.operation==He.COLLECT&&(i.value=!0)}):J.error(d.error),w.value=!1}),l.value&&v.findComments({article:l.value._id}).then(d=>{var y;console.log(d),d.success?(b.push(...I(((y=d.data)==null?void 0:y.comments)||[])),_.value=!1):J.error(d.error)})});function I($){let g=[];$.forEach(y=>{(y.parentComment==null||y.parentComment.length==0)&&g.push({...y,children:[]})});function d(y,F){for(let W of y)if(W.parentComment+""!=null)for(let E of F)E._id+""==W.parentComment+""?E.children.push({...W,children:[]}):E.children.length>0&&d(y,E.children)}return d($,g),g}const R=()=>{var g;if(!B.value)return;A.value=!0;let $={article:((g=l.value)==null?void 0:g._id)||"",content:B.value,parentComment:s.value||"",createdBy:a.user._id,like:0,dislike:0,updatedAt:new Date,createdAt:new Date,isDeleted:!1};A.value=!1,s.value=null,v.createComment($).then(d=>{d.success?(B.value="",J.success("publish comment successfully!")):J.error(d.error)})};function M($){var g;$._id&&(s.value=$._id),f.value="Replay to: "+$.author.username,(g=r.value)==null||g.focus()}function L(){var $;n.push({path:"/publish",query:{_id:(($=l.value)==null?void 0:$._id)+""}})}const j=()=>new Promise(async $=>{var g,d;(g=l.value)!=null&&g._id&&await h.deleteById((d=l.value)==null?void 0:d._id).then(y=>{console.log(y),y.success?(J.success(y.data),$(!0)):$(!1)}).catch(y=>{$(!1)})}),k=$=>{J.warning("Delete operation canceled")};return($,g)=>{const d=ke,y=Cn,F=Lt,W=te("v-md-preview"),E=vn,re=ln,ge=Ce,Xe=$t,we=Xt,We=Fe,Be=Nt,Ve=wt;return D(),V(Be,{spinning:ze(x)},{default:T(()=>{var Te,Pe;return[l.value?(D(),ie("div",An,[o(E,{title:l.value.title,class:"article-detail-container",avatar:{src:(Te=p.value)==null?void 0:Te.avatar},breadcrumb:{routes:O},onBack:g[0]||(g[0]=()=>$.$router.go(-1))},St({tags:T(()=>[(D(!0),ie(he,null,be(c,X=>(D(),V(F,{color:X.color,key:X._id},{default:T(()=>[ue(ne(X.name),1)]),_:2},1032,["color"]))),128))]),default:T(()=>[o(W,{text:l.value.content},null,8,["text"])]),_:2},[l.value.createdBy+""==((Pe=p.value)==null?void 0:Pe._id)?{name:"extra",fn:T(()=>[o(d,{type:"primary",onClick:L},{default:T(()=>g[2]||(g[2]=[ue("Edit")])),_:1}),o(y,{title:"Ready to delete?",onConfirm:j,onCancel:k},{default:T(()=>[o(d,{type:"primary",danger:""},{default:T(()=>g[3]||(g[3]=[ue("Delete")])),_:1})]),_:1})]),key:"0"}:void 0]),1032,["title","avatar","breadcrumb"]),o(re,{style:{height:"2px"}}),o(Be,{spinning:ze(_)},{default:T(()=>[(D(!0),ie(he,null,be(b,X=>(D(),V(On,{key:X._id+"",comment:X,onReplay:M},null,8,["comment"]))),128)),o(We,{class:"comment-input-container"},{avatar:T(()=>{var X,Oe;return[o(ge,{src:(X=p.value)==null?void 0:X.avatar,alt:(Oe=p.value)==null?void 0:Oe.username},null,8,["src","alt"])]}),content:T(()=>[o(we,null,{default:T(()=>[o(Xe,{value:B.value,"onUpdate:value":g[1]||(g[1]=X=>B.value=X),rows:4,placeholder:f.value,ref_key:"comment_input",ref:r},null,8,["value","placeholder"])]),_:1}),o(we,null,{default:T(()=>[o(d,{"html-type":"submit",loading:A.value,type:"primary",onClick:R},{default:T(()=>g[4]||(g[4]=[ue(" Add Comment ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["spinning"])])):(D(),V(Ve,{key:1}))]}),_:1},8,["spinning"])}}}),Fn=Bt(In,[["__scopeId","data-v-452805a5"]]);export{Fn as default};
