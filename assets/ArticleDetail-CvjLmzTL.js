var qe=Object.defineProperty;var Ue=(e,n,t)=>n in e?qe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var ce=(e,n,t)=>Ue(e,typeof n!="symbol"?n+"":n,t);import{d as U,I as Q,Z as oe,a as o,y as z,a0 as q,m as de,a$ as Ye,b0 as Je,E as le,G as pe,x as B,H as Se,O as Ze,ap as se,b1 as Le,b2 as Ke,aD as Qe,N as fe,v as G,a2 as Ee,aj as Ae,a5 as et,ao as je,aJ as tt,aS as ee,ag as nt,b3 as at,b4 as rt,C as ot,b5 as it,z as D,al as lt,am as st,X as ct,b6 as ut,b7 as dt,b8 as mt,l as te,s as pt,an as ft,b9 as gt,ba as Ie,B as ke,a1 as vt,as as ne,o as R,aT as V,w,b as J,t as ae,bb as ht,c as ie,F as he,aU as be,aV as bt,D as _t,aq as yt,r as ve,S as St,ar as Z,bc as Ct,e as ue,aW as ze,at as xt,u as $t,au as wt,aw as Bt,aZ as Tt,f as Pt}from"./index-B4RpdKRK.js";import{D as Ot,A as At}from"./ArticleService-CMBqTcrW.js";import{U as It}from"./UserService-C5qPLgY-.js";import{u as zt,A as Ce,S as Dt,P as Ht,a as Rt,I as Mt,C as Nt,O as De}from"./interaction-CmntyFaa.js";import{R as Lt}from"./request-CxKKcrXY.js";import{h as He,T as Et}from"./moment-BzM3wb9j.js";import{T as jt}from"./TagService-DrJcHdWI.js";import{o as kt,T as Ft,u as Xt}from"./transButton-CiArVmOp.js";import{S as Wt}from"./index-DCOvVNPh.js";import{_ as Vt}from"./FormItem-Bnv6IGGp.js";var Gt=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]]);return t};const qt=()=>({prefixCls:String,href:String,separator:q.any,dropdownProps:de(),overlay:q.any,onClick:Ye()}),me=U({compatConfig:{MODE:3},name:"ABreadcrumbItem",inheritAttrs:!1,__ANT_BREADCRUMB_ITEM:!0,props:qt(),slots:Object,setup(e,n){let{slots:t,attrs:a,emit:r}=n;const{prefixCls:d}=Q("breadcrumb",e),v=(y,S)=>{const h=oe(t,e,"overlay");return h?o(Je,z(z({},e.dropdownProps),{},{overlay:h,placement:"bottom"}),{default:()=>[o("span",{class:`${S}-overlay-link`},[y,o(Ot,null,null)])]}):y},g=y=>{r("click",y)};return()=>{var y;const S=(y=oe(t,e,"separator"))!==null&&y!==void 0?y:"/",h=oe(t,e),{class:s,style:p}=a,m=Gt(a,["class","style"]);let b;return e.href!==void 0?b=o("a",z({class:`${d.value}-link`,onClick:g},m),[h]):b=o("span",z({class:`${d.value}-link`,onClick:g},m),[h]),b=v(b,d.value),h!=null?o("li",{class:s,style:p},[b,S&&o("span",{class:`${d.value}-separator`},[S])]):null}}}),Ut=e=>{const{componentCls:n,iconCls:t}=e;return{[n]:B(B({},Se(e)),{color:e.breadcrumbBaseColor,fontSize:e.breadcrumbFontSize,[t]:{fontSize:e.breadcrumbIconFontSize},ol:{display:"flex",flexWrap:"wrap",margin:0,padding:0,listStyle:"none"},a:B({color:e.breadcrumbLinkColor,transition:`color ${e.motionDurationMid}`,padding:`0 ${e.paddingXXS}px`,borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",marginInline:-e.marginXXS,"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover}},Ze(e)),"li:last-child":{color:e.breadcrumbLastItemColor,[`& > ${n}-separator`]:{display:"none"}},[`${n}-separator`]:{marginInline:e.breadcrumbSeparatorMargin,color:e.breadcrumbSeparatorColor},[`${n}-link`]:{[`
          > ${t} + span,
          > ${t} + a
        `]:{marginInlineStart:e.marginXXS}},[`${n}-overlay-link`]:{borderRadius:e.borderRadiusSM,height:e.lineHeight*e.fontSize,display:"inline-block",padding:`0 ${e.paddingXXS}px`,marginInline:-e.marginXXS,[`> ${t}`]:{marginInlineStart:e.marginXXS,fontSize:e.fontSizeIcon},"&:hover":{color:e.breadcrumbLinkColorHover,backgroundColor:e.colorBgTextHover,a:{color:e.breadcrumbLinkColorHover}},a:{"&:hover":{backgroundColor:"transparent"}}},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},Yt=le("Breadcrumb",e=>{const n=pe(e,{breadcrumbBaseColor:e.colorTextDescription,breadcrumbFontSize:e.fontSize,breadcrumbIconFontSize:e.fontSize,breadcrumbLinkColor:e.colorTextDescription,breadcrumbLinkColorHover:e.colorText,breadcrumbLastItemColor:e.colorText,breadcrumbSeparatorMargin:e.marginXS,breadcrumbSeparatorColor:e.colorTextDescription});return[Ut(n)]}),Jt=()=>({prefixCls:String,routes:{type:Array},params:q.any,separator:q.any,itemRender:{type:Function}});function Zt(e,n){if(!e.breadcrumbName)return null;const t=Object.keys(n).join("|");return e.breadcrumbName.replace(new RegExp(`:(${t})`,"g"),(r,d)=>n[d]||r)}function Re(e){const{route:n,params:t,routes:a,paths:r}=e,d=a.indexOf(n)===a.length-1,v=Zt(n,t);return d?o("span",null,[v]):o("a",{href:`#/${r.join("/")}`},[v])}const re=U({compatConfig:{MODE:3},name:"ABreadcrumb",inheritAttrs:!1,props:Jt(),slots:Object,setup(e,n){let{slots:t,attrs:a}=n;const{prefixCls:r,direction:d}=Q("breadcrumb",e),[v,g]=Yt(r),y=(s,p)=>(s=(s||"").replace(/^\//,""),Object.keys(p).forEach(m=>{s=s.replace(`:${m}`,p[m])}),s),S=(s,p,m)=>{const b=[...s],_=y(p||"",m);return _&&b.push(_),b},h=s=>{let{routes:p=[],params:m={},separator:b,itemRender:_=Re}=s;const $=[];return p.map(P=>{const I=y(P.path,m);I&&$.push(I);const T=[...$];let c=null;P.children&&P.children.length&&(c=o(Qe,{items:P.children.map(i=>({key:i.path||i.breadcrumbName,label:_({route:i,params:m,routes:p,paths:S(T,i.path,m)})}))},null));const u={separator:b};return c&&(u.overlay=c),o(me,z(z({},u),{},{key:I||P.breadcrumbName}),{default:()=>[_({route:P,params:m,routes:p,paths:T})]})})};return()=>{var s;let p;const{routes:m,params:b={}}=e,_=se(oe(t,e)),$=(s=oe(t,e,"separator"))!==null&&s!==void 0?s:"/",P=e.itemRender||t.itemRender||Re;m&&m.length>0?p=h({routes:m,params:b,separator:$,itemRender:P}):_.length&&(p=_.map((T,c)=>(Le(typeof T.type=="object"&&(T.type.__ANT_BREADCRUMB_ITEM||T.type.__ANT_BREADCRUMB_SEPARATOR)),Ke(T,{separator:$,key:c}))));const I={[r.value]:!0,[`${r.value}-rtl`]:d.value==="rtl",[`${a.class}`]:!!a.class,[g.value]:!0};return v(o("nav",z(z({},a),{},{class:I}),[o("ol",null,[p])]))}}});var Kt=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]]);return t};const Qt=()=>({prefixCls:String}),_e=U({compatConfig:{MODE:3},name:"ABreadcrumbSeparator",__ANT_BREADCRUMB_SEPARATOR:!0,inheritAttrs:!1,props:Qt(),setup(e,n){let{slots:t,attrs:a}=n;const{prefixCls:r}=Q("breadcrumb",e);return()=>{var d;const{separator:v,class:g}=a,y=Kt(a,["separator","class"]),S=se((d=t.default)===null||d===void 0?void 0:d.call(t));return o("span",z({class:[`${r.value}-separator`,g]},y),[S.length>0?S:"/"])}}});re.Item=me;re.Separator=_e;re.install=function(e){return e.component(re.name,re),e.component(me.name,me),e.component(_e.name,_e),e};const en=e=>{const{componentCls:n,commentBg:t,commentPaddingBase:a,commentNestIndent:r,commentFontSizeBase:d,commentFontSizeSm:v,commentAuthorNameColor:g,commentAuthorTimeColor:y,commentActionColor:S,commentActionHoverColor:h,commentActionsMarginBottom:s,commentActionsMarginTop:p,commentContentDetailPMarginBottom:m}=e;return{[n]:{position:"relative",backgroundColor:t,[`${n}-inner`]:{display:"flex",padding:a},[`${n}-avatar`]:{position:"relative",flexShrink:0,marginRight:e.marginSM,cursor:"pointer",img:{width:"32px",height:"32px",borderRadius:"50%"}},[`${n}-content`]:{position:"relative",flex:"1 1 auto",minWidth:"1px",fontSize:d,wordWrap:"break-word","&-author":{display:"flex",flexWrap:"wrap",justifyContent:"flex-start",marginBottom:e.marginXXS,fontSize:d,"& > a,& > span":{paddingRight:e.paddingXS,fontSize:v,lineHeight:"18px"},"&-name":{color:g,fontSize:d,transition:`color ${e.motionDurationSlow}`,"> *":{color:g,"&:hover":{color:g}}},"&-time":{color:y,whiteSpace:"nowrap",cursor:"auto"}},"&-detail p":{marginBottom:m,whiteSpace:"pre-wrap"}},[`${n}-actions`]:{marginTop:p,marginBottom:s,paddingLeft:0,"> li":{display:"inline-block",color:S,"> span":{marginRight:"10px",color:S,fontSize:v,cursor:"pointer",transition:`color ${e.motionDurationSlow}`,userSelect:"none","&:hover":{color:h}}}},[`${n}-nested`]:{marginLeft:r},"&-rtl":{direction:"rtl"}}}},tn=le("Comment",e=>{const n=pe(e,{commentBg:"inherit",commentPaddingBase:`${e.paddingMD}px 0`,commentNestIndent:"44px",commentFontSizeBase:e.fontSize,commentFontSizeSm:e.fontSizeSM,commentAuthorNameColor:e.colorTextTertiary,commentAuthorTimeColor:e.colorTextPlaceholder,commentActionColor:e.colorTextTertiary,commentActionHoverColor:e.colorTextSecondary,commentActionsMarginBottom:"inherit",commentActionsMarginTop:e.marginSM,commentContentDetailPMarginBottom:"inherit"});return[en(n)]}),nn=()=>({actions:Array,author:q.any,avatar:q.any,content:q.any,prefixCls:String,datetime:q.any}),an=U({compatConfig:{MODE:3},name:"AComment",inheritAttrs:!1,props:nn(),slots:Object,setup(e,n){let{slots:t,attrs:a}=n;const{prefixCls:r,direction:d}=Q("comment",e),[v,g]=tn(r),y=(h,s)=>o("div",{class:`${h}-nested`},[s]),S=h=>!h||!h.length?null:h.map((p,m)=>o("li",{key:`action-${m}`},[p]));return()=>{var h,s,p,m,b,_,$,P,I,T,c;const u=r.value,i=(h=e.actions)!==null&&h!==void 0?h:(s=t.actions)===null||s===void 0?void 0:s.call(t),f=(p=e.author)!==null&&p!==void 0?p:(m=t.author)===null||m===void 0?void 0:m.call(t),A=(b=e.avatar)!==null&&b!==void 0?b:(_=t.avatar)===null||_===void 0?void 0:_.call(t),H=($=e.content)!==null&&$!==void 0?$:(P=t.content)===null||P===void 0?void 0:P.call(t),M=(I=e.datetime)!==null&&I!==void 0?I:(T=t.datetime)===null||T===void 0?void 0:T.call(t),L=o("div",{class:`${u}-avatar`},[typeof A=="string"?o("img",{src:A,alt:"comment-avatar"},null):A]),j=i?o("ul",{class:`${u}-actions`},[S(Array.isArray(i)?i:[i])]):null,k=o("div",{class:`${u}-content-author`},[f&&o("span",{class:`${u}-content-author-name`},[f]),M&&o("span",{class:`${u}-content-author-time`},[M])]),N=o("div",{class:`${u}-content`},[k,o("div",{class:`${u}-content-detail`},[H]),j]),E=o("div",{class:`${u}-inner`},[L,N]),C=se((c=t.default)===null||c===void 0?void 0:c.call(t));return v(o("div",z(z({},a),{},{class:[u,{[`${u}-rtl`]:d.value==="rtl"},a.class,g.value]}),[E,C&&C.length?y(u,C):null]))}}}),Fe=fe(an),rn=e=>{const{componentCls:n,sizePaddingEdgeHorizontal:t,colorSplit:a,lineWidth:r}=e;return{[n]:B(B({},Se(e)),{borderBlockStart:`${r}px solid ${a}`,"&-vertical":{position:"relative",top:"-0.06em",display:"inline-block",height:"0.9em",margin:`0 ${e.dividerVerticalGutterMargin}px`,verticalAlign:"middle",borderTop:0,borderInlineStart:`${r}px solid ${a}`},"&-horizontal":{display:"flex",clear:"both",width:"100%",minWidth:"100%",margin:`${e.dividerHorizontalGutterMargin}px 0`},[`&-horizontal${n}-with-text`]:{display:"flex",alignItems:"center",margin:`${e.dividerHorizontalWithTextGutterMargin}px 0`,color:e.colorTextHeading,fontWeight:500,fontSize:e.fontSizeLG,whiteSpace:"nowrap",textAlign:"center",borderBlockStart:`0 ${a}`,"&::before, &::after":{position:"relative",width:"50%",borderBlockStart:`${r}px solid transparent`,borderBlockStartColor:"inherit",borderBlockEnd:0,transform:"translateY(50%)",content:"''"}},[`&-horizontal${n}-with-text-left`]:{"&::before":{width:"5%"},"&::after":{width:"95%"}},[`&-horizontal${n}-with-text-right`]:{"&::before":{width:"95%"},"&::after":{width:"5%"}},[`${n}-inner-text`]:{display:"inline-block",padding:"0 1em"},"&-dashed":{background:"none",borderColor:a,borderStyle:"dashed",borderWidth:`${r}px 0 0`},[`&-horizontal${n}-with-text${n}-dashed`]:{"&::before, &::after":{borderStyle:"dashed none none"}},[`&-vertical${n}-dashed`]:{borderInlineStartWidth:r,borderInlineEnd:0,borderBlockStart:0,borderBlockEnd:0},[`&-plain${n}-with-text`]:{color:e.colorText,fontWeight:"normal",fontSize:e.fontSize},[`&-horizontal${n}-with-text-left${n}-no-default-orientation-margin-left`]:{"&::before":{width:0},"&::after":{width:"100%"},[`${n}-inner-text`]:{paddingInlineStart:t}},[`&-horizontal${n}-with-text-right${n}-no-default-orientation-margin-right`]:{"&::before":{width:"100%"},"&::after":{width:0},[`${n}-inner-text`]:{paddingInlineEnd:t}}})}},on=le("Divider",e=>{const n=pe(e,{dividerVerticalGutterMargin:e.marginXS,dividerHorizontalWithTextGutterMargin:e.margin,dividerHorizontalGutterMargin:e.marginLG});return[rn(n)]},{sizePaddingEdgeHorizontal:0}),ln=()=>({prefixCls:String,type:{type:String,default:"horizontal"},dashed:{type:Boolean,default:!1},orientation:{type:String,default:"center"},plain:{type:Boolean,default:!1},orientationMargin:[String,Number]}),sn=U({name:"ADivider",inheritAttrs:!1,compatConfig:{MODE:3},props:ln(),setup(e,n){let{slots:t,attrs:a}=n;const{prefixCls:r,direction:d}=Q("divider",e),[v,g]=on(r),y=G(()=>e.orientation==="left"&&e.orientationMargin!=null),S=G(()=>e.orientation==="right"&&e.orientationMargin!=null),h=G(()=>{const{type:m,dashed:b,plain:_}=e,$=r.value;return{[$]:!0,[g.value]:!!g.value,[`${$}-${m}`]:!0,[`${$}-dashed`]:!!b,[`${$}-plain`]:!!_,[`${$}-rtl`]:d.value==="rtl",[`${$}-no-default-orientation-margin-left`]:y.value,[`${$}-no-default-orientation-margin-right`]:S.value}}),s=G(()=>{const m=typeof e.orientationMargin=="number"?`${e.orientationMargin}px`:e.orientationMargin;return B(B({},y.value&&{marginLeft:m}),S.value&&{marginRight:m})}),p=G(()=>e.orientation.length>0?"-"+e.orientation:e.orientation);return()=>{var m;const b=se((m=t.default)===null||m===void 0?void 0:m.call(t));return v(o("div",z(z({},a),{},{class:[h.value,b.length?`${r.value}-with-text ${r.value}-with-text${p.value}`:"",a.class],role:"separator"}),[b.length?o("span",{class:`${r.value}-inner-text`,style:s.value},[b]):null]))}}}),cn=fe(sn);var un={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"};function Me(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){dn(e,r,t[r])})}return e}function dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var xe=function(n,t){var a=Me({},n,t.attrs);return o(Ee,Me({},a,{icon:un}),null)};xe.displayName="ArrowLeftOutlined";xe.inheritAttrs=!1;var mn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 000-48.4z"}}]},name:"arrow-right",theme:"outlined"};function Ne(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?Object(arguments[n]):{},a=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),a.forEach(function(r){pn(e,r,t[r])})}return e}function pn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var $e=function(n,t){var a=Ne({},n,t.attrs);return o(Ee,Ne({},a,{icon:mn}),null)};$e.displayName="ArrowRightOutlined";$e.inheritAttrs=!1;const fn=e=>{const{componentCls:n,antCls:t}=e;return{[n]:B(B({},Se(e)),{position:"relative",padding:`${e.pageHeaderPaddingVertical}px ${e.pageHeaderPadding}px`,backgroundColor:e.colorBgContainer,[`&${n}-ghost`]:{backgroundColor:e.pageHeaderGhostBg},"&.has-footer":{paddingBottom:0},[`${n}-back`]:{marginRight:e.marginMD,fontSize:e.fontSizeLG,lineHeight:1,"&-button":B(B({},kt(e)),{color:e.pageHeaderBackColor,cursor:"pointer"})},[`${t}-divider-vertical`]:{height:"14px",margin:`0 ${e.marginSM}`,verticalAlign:"middle"},[`${t}-breadcrumb + &-heading`]:{marginTop:e.marginXS},[`${n}-heading`]:{display:"flex",justifyContent:"space-between","&-left":{display:"flex",alignItems:"center",margin:`${e.marginXS/2}px 0`,overflow:"hidden"},"&-title":B({marginRight:e.marginSM,marginBottom:0,color:e.colorTextHeading,fontWeight:600,fontSize:e.pageHeaderHeadingTitle,lineHeight:`${e.controlHeight}px`},Ae),[`${t}-avatar`]:{marginRight:e.marginSM},"&-sub-title":B({marginRight:e.marginSM,color:e.colorTextDescription,fontSize:e.pageHeaderHeadingSubTitle,lineHeight:e.lineHeight},Ae),"&-extra":{margin:`${e.marginXS/2}px 0`,whiteSpace:"nowrap","> *":{marginLeft:e.marginSM,whiteSpace:"unset"},"> *:first-child":{marginLeft:0}}},[`${n}-content`]:{paddingTop:e.pageHeaderContentPaddingVertical},[`${n}-footer`]:{marginTop:e.marginMD,[`${t}-tabs`]:{[`> ${t}-tabs-nav`]:{margin:0,"&::before":{border:"none"}},[`${t}-tabs-tab`]:{paddingTop:e.paddingXS,paddingBottom:e.paddingXS,fontSize:e.pageHeaderTabFontSize}}},[`${n}-compact ${n}-heading`]:{flexWrap:"wrap"},[`&${e.componentCls}-rtl`]:{direction:"rtl"}})}},gn=le("PageHeader",e=>{const n=pe(e,{pageHeaderPadding:e.paddingLG,pageHeaderPaddingVertical:e.paddingMD,pageHeaderPaddingBreadcrumb:e.paddingSM,pageHeaderContentPaddingVertical:e.paddingSM,pageHeaderBackColor:e.colorTextBase,pageHeaderGhostBg:"transparent",pageHeaderHeadingTitle:e.fontSizeHeading4,pageHeaderHeadingSubTitle:e.fontSize,pageHeaderTabFontSize:e.fontSizeLG});return[fn(n)]}),vn=()=>({backIcon:ee(),prefixCls:String,title:ee(),subTitle:ee(),breadcrumb:q.object,tags:ee(),footer:ee(),extra:ee(),avatar:de(),ghost:{type:Boolean,default:void 0},onBack:Function}),hn=U({compatConfig:{MODE:3},name:"APageHeader",inheritAttrs:!1,props:vn(),slots:Object,setup(e,n){let{emit:t,slots:a,attrs:r}=n;const{prefixCls:d,direction:v,pageHeader:g}=Q("page-header",e),[y,S]=gn(d),h=et(!1),s=zt(),p=c=>{let{width:u}=c;s.value||(h.value=u<768)},m=G(()=>{var c,u,i;return(i=(c=e.ghost)!==null&&c!==void 0?c:(u=g==null?void 0:g.value)===null||u===void 0?void 0:u.ghost)!==null&&i!==void 0?i:!0}),b=()=>{var c,u,i;return(i=(c=e.backIcon)!==null&&c!==void 0?c:(u=a.backIcon)===null||u===void 0?void 0:u.call(a))!==null&&i!==void 0?i:v.value==="rtl"?o($e,null,null):o(xe,null,null)},_=c=>!c||!e.onBack?null:o(rt,{componentName:"PageHeader",children:u=>{let{back:i}=u;return o("div",{class:`${d.value}-back`},[o(Ft,{onClick:f=>{t("back",f)},class:`${d.value}-back-button`,"aria-label":i},{default:()=>[c]})])}},null),$=()=>{var c;return e.breadcrumb?o(re,e.breadcrumb,null):(c=a.breadcrumb)===null||c===void 0?void 0:c.call(a)},P=()=>{var c,u,i,f,A,H,M,L,j;const{avatar:k}=e,N=(c=e.title)!==null&&c!==void 0?c:(u=a.title)===null||u===void 0?void 0:u.call(a),E=(i=e.subTitle)!==null&&i!==void 0?i:(f=a.subTitle)===null||f===void 0?void 0:f.call(a),C=(A=e.tags)!==null&&A!==void 0?A:(H=a.tags)===null||H===void 0?void 0:H.call(a),l=(M=e.extra)!==null&&M!==void 0?M:(L=a.extra)===null||L===void 0?void 0:L.call(a),x=`${d.value}-heading`,O=N||E||C||l;if(!O)return null;const Y=b(),F=_(Y);return o("div",{class:x},[(F||k||O)&&o("div",{class:`${x}-left`},[F,k?o(Ce,k,null):(j=a.avatar)===null||j===void 0?void 0:j.call(a),N&&o("span",{class:`${x}-title`,title:typeof N=="string"?N:void 0},[N]),E&&o("span",{class:`${x}-sub-title`,title:typeof E=="string"?E:void 0},[E]),C&&o("span",{class:`${x}-tags`},[C])]),l&&o("span",{class:`${x}-extra`},[o(Dt,null,{default:()=>[l]})])])},I=()=>{var c,u;const i=(c=e.footer)!==null&&c!==void 0?c:nt((u=a.footer)===null||u===void 0?void 0:u.call(a));return at(i)?null:o("div",{class:`${d.value}-footer`},[i])},T=c=>o("div",{class:`${d.value}-content`},[c]);return()=>{var c,u;const i=((c=e.breadcrumb)===null||c===void 0?void 0:c.routes)||a.breadcrumb,f=e.footer||a.footer,A=se((u=a.default)===null||u===void 0?void 0:u.call(a)),H=je(d.value,{"has-breadcrumb":i,"has-footer":f,[`${d.value}-ghost`]:m.value,[`${d.value}-rtl`]:v.value==="rtl",[`${d.value}-compact`]:h.value},r.class,S.value);return y(o(tt,{onResize:p},{default:()=>[o("div",z(z({},r),{},{class:H}),[$(),P(),A.length?T(A):null,I()])]}))}}}),bn=fe(hn),_n=e=>{const{componentCls:n,iconCls:t,zIndexPopup:a,colorText:r,colorWarning:d,marginXS:v,fontSize:g,fontWeightStrong:y,lineHeight:S}=e;return{[n]:{zIndex:a,[`${n}-inner-content`]:{color:r},[`${n}-message`]:{position:"relative",marginBottom:v,color:r,fontSize:g,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${n}-message-icon ${t}`]:{color:d,fontSize:g,flex:"none",lineHeight:1,paddingTop:(Math.round(g*S)-g)/2},"&-title":{flex:"auto",marginInlineStart:v},"&-title-only":{fontWeight:y}},[`${n}-description`]:{position:"relative",marginInlineStart:g+v,marginBottom:v,color:r,fontSize:g},[`${n}-buttons`]:{textAlign:"end",button:{marginInlineStart:v}}}}},yn=le("Popconfirm",e=>_n(e),e=>{const{zIndexPopupBase:n}=e;return{zIndexPopup:n+60}});var Sn=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(t[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)n.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(t[a[r]]=e[a[r]]);return t};const Cn=()=>B(B({},mt()),{prefixCls:String,content:te(),title:te(),description:te(),okType:pt("primary"),disabled:{type:Boolean,default:!1},okText:te(),cancelText:te(),icon:te(),okButtonProps:de(),cancelButtonProps:de(),showCancel:{type:Boolean,default:!0},onConfirm:Function,onCancel:Function}),xn=U({compatConfig:{MODE:3},name:"APopconfirm",inheritAttrs:!1,props:ot(Cn(),B(B({},it()),{trigger:"click",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0,okType:"primary",disabled:!1})),slots:Object,setup(e,n){let{slots:t,emit:a,expose:r,attrs:d}=n;const v=D();Le(e.visible===void 0),r({getPopupDomNode:()=>{var i,f;return(f=(i=v.value)===null||i===void 0?void 0:i.getPopupDomNode)===null||f===void 0?void 0:f.call(i)}});const[g,y]=Xt(!1,{value:lt(e,"open")}),S=(i,f)=>{e.open===void 0&&y(i),a("update:open",i),a("openChange",i,f)},h=i=>{S(!1,i)},s=i=>{var f;return(f=e.onConfirm)===null||f===void 0?void 0:f.call(e,i)},p=i=>{var f;S(!1,i),(f=e.onCancel)===null||f===void 0||f.call(e,i)},m=i=>{i.keyCode===vt.ESC&&g&&S(!1,i)},b=i=>{const{disabled:f}=e;f||S(i)},{prefixCls:_,getPrefixCls:$}=Q("popconfirm",e),P=G(()=>$()),I=G(()=>$("btn")),[T]=yn(_),[c]=st("Popconfirm",ft.Popconfirm),u=()=>{var i,f,A,H,M;const{okButtonProps:L,cancelButtonProps:j,title:k=(i=t.title)===null||i===void 0?void 0:i.call(t),description:N=(f=t.description)===null||f===void 0?void 0:f.call(t),cancelText:E=(A=t.cancel)===null||A===void 0?void 0:A.call(t),okText:C=(H=t.okText)===null||H===void 0?void 0:H.call(t),okType:l,icon:x=((M=t.icon)===null||M===void 0?void 0:M.call(t))||o(gt,null,null),showCancel:O=!0}=e,{cancelButton:Y,okButton:F}=t,W=B({onClick:p,size:"small"},j),ge=B(B(B({onClick:s},Ie(l)),{size:"small"}),L);return o("div",{class:`${_.value}-inner-content`},[o("div",{class:`${_.value}-message`},[x&&o("span",{class:`${_.value}-message-icon`},[x]),o("div",{class:[`${_.value}-message-title`,{[`${_.value}-message-title-only`]:!!N}]},[k])]),N&&o("div",{class:`${_.value}-description`},[N]),o("div",{class:`${_.value}-buttons`},[O?Y?Y(W):o(ke,W,{default:()=>[E||c.value.cancelText]}):null,F?F(ge):o(Rt,{buttonProps:B(B({size:"small"},Ie(l)),L),actionFn:s,close:h,prefixCls:I.value,quitOnNullishReturnValue:!0,emitEvent:!0},{default:()=>[C||c.value.okText]})])])};return()=>{var i;const{placement:f,overlayClassName:A,trigger:H="click"}=e,M=Sn(e,["placement","overlayClassName","trigger"]),L=ct(M,["title","content","cancelText","okText","onUpdate:open","onConfirm","onCancel","prefixCls"]),j=je(_.value,A);return T(o(Ht,z(z(z({},L),d),{},{trigger:H,placement:f,onOpenChange:b,open:g.value,overlayClassName:j,transitionName:dt(P.value,"zoom-big",e.transitionName),ref:v,"data-popover-inject":!0}),{default:()=>[ut(((i=t.default)===null||i===void 0?void 0:i.call(t))||[],{onKeydown:k=>{m(k)}},!1)],content:u}))}}}),$n=fe(xn),K=class K{constructor(){ce(this,"collection","comment");ce(this,"request");this.request=new Lt}static getInstance(){return K.instance||(K.instance=new K),K.instance}async findCommentById(n){try{const t=await this.request.get(`/comment/${n}`);return t.code==200?{success:!0,data:t.data}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}async findComments(n={},t={page:0,pageSize:10}){try{const a=await this.request.get("/comment",{params:n});return a.code==200?{success:!0,data:{comments:a.data,total:1}}:{success:!1,error:a.message}}catch(a){return{success:!1,error:a.message}}}async createComment(n){try{const t=await this.request.post("/comment",{data:n});return t.code==200?{success:!0,data:t.data}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}async updateComment(n,t){try{const a=await this.request.put(`/comment/${n}`,{data:t});return a.code==200?{success:!0,data:a.data}:{success:!1,error:a.message}}catch(a){return{success:!1,error:a.message}}}async deleteById(n){try{const t=await this.request.delete(`/comment/${n}`);return t.code==200?{success:!0,data:t.data}:{success:!1,error:t.message}}catch(t){return{success:!1,error:t.message}}}};ce(K,"instance");let ye=K;const wn=["href"],Bn={key:"comment-basic-like"},Tn={style:{"padding-left":"8px",cursor:"auto"}},Pn={key:"comment-basic-dislike"},On={style:{"padding-left":"8px",cursor:"auto"}},An={key:0},In=U({__name:"Comment",props:{comment:{type:Object,default:{}}},emits:["replay"],setup(e,{emit:n}){const t=n,a=e,r=D(0),d=D(0),v=D(),g=()=>{r.value=1,d.value=0,v.value="liked"},y=()=>{r.value=0,d.value=1,v.value="disliked"};function S(p){console.log(p),t("replay",p)}const h=G(()=>He(a.comment.updatedAt).format("YYYY-MM-DD: HH-mm-ss")),s=G(()=>He(a.comment.createdAt).fromNow());return(p,m)=>{const b=Ce,_=_t,$=ne("LikeFilled"),P=ne("LikeOutlined"),I=ne("DislikeFilled"),T=ne("DislikeOutlined"),c=ne("Comment",!0),u=Fe;return R(),V(u,{class:"comment"},{author:w(()=>{var i,f;return[J("a",{href:`#/user-info?use_id=${e.comment.author.userId}`},ae((f=(i=e.comment)==null?void 0:i.author)==null?void 0:f.username),9,wn)]}),avatar:w(()=>{var i;return[o(b,{src:(i=e.comment.author)==null?void 0:i.avatar,alt:e.comment.author.username},null,8,["src","alt"])]}),datetime:w(()=>[o(_,{title:h.value},{default:w(()=>[J("span",null,ae(s.value),1)]),_:1},8,["title"])]),actions:w(()=>[J("span",Bn,[o(_,{title:"Like"},{default:w(()=>[v.value==="liked"?(R(),V($,{key:0,onClick:g})):(R(),V(P,{key:1,onClick:g}))]),_:1}),J("span",Tn,ae(r.value),1)]),J("span",Pn,[o(_,{title:"Dislike"},{default:w(()=>[v.value==="disliked"?(R(),V(I,{key:0,onClick:y})):(R(),V(T,{key:1,onClick:y}))]),_:1}),J("span",On,ae(d.value),1)]),J("span",{key:"comment-nested-reply-to",onClick:m[0]||(m[0]=ht(i=>S(e.comment),["prevent"]))},"Reply to")]),content:w(()=>{var i;return[J("p",null,ae((i=e.comment)==null?void 0:i.content),1)]}),default:w(()=>[e.comment.children&&e.comment.children.length?(R(),ie("div",An,[(R(!0),ie(he,null,be(e.comment.children,i=>(R(),V(c,{key:i._id,comment:i,onReplay:S},null,8,["comment"]))),128))])):bt("",!0)]),_:1})}}}),zn={key:0,class:"article-detail"},Dn=U({__name:"ArticleDetail",setup(e){var E;const n=xt(),t=$t(),a=yt(),r=D(),d=It.getInstance(),v=At.getInstance(),g=ye.getInstance(),y=Mt.getInstance(),S=jt.getInstance(),h=ve([]),s=D(),p=D(),m=D(a.user),b=ve([]);let _=D(!0),$=D(!0),P=D(!0);const I=ve([{path:"/",breadcrumbName:"Home"},{path:"/article",breadcrumbName:"Article"},{path:"/article-info",breadcrumbName:((E=s.value)==null?void 0:E.title)||""}]),T=D(!1),c=D(""),u=D(),i=D(!1),f=D(!1),A=D("input your comment");St(async()=>{var C;await v.findArticleById(n.query._id+"").then(l=>{var x;if(l.success&&(s.value=l.data||void 0,I[2].breadcrumbName=((x=s.value)==null?void 0:x.title)||""),_.value=!1,!l.success)throw Z.error(l.error),new Error(l.error)}).catch(l=>{throw new Error(l.message)}),s.value&&S.findTagByIds(s.value.tags).then(l=>{l.success&&l.data&&(b.splice(0,b.length),b.push(...l.data))}),s.value&&d.findUserInfoById(s.value.createdBy).then(l=>{l.success?p.value=l.data:Z.error(l.error)}),y.findInteractions({createdBy:a.user._id,documentId:(C=s.value)==null?void 0:C._id,collectionName:Nt.ARTICLE}).then(l=>{var x;l.success?(x=l.data)==null||x.interactions.forEach(O=>{O.operation==De.STAR?i.value=!0:O.operation==De.COLLECT&&(f.value=!0)}):Z.error(l.error),P.value=!1}),s.value&&g.findComments({article:s.value._id}).then(l=>{var x;l.success?(h.push(...H(((x=l.data)==null?void 0:x.comments)||[])),$.value=!1):Z.error(l.error)})});function H(C){let l=[];C.forEach(O=>{(O.parentComment==null||O.parentComment.length==0)&&l.push({...O,children:[]})});function x(O,Y){for(let F of O)if(F.parentComment+""!=null)for(let W of Y)W._id+""==F.parentComment+""?W.children.push({...F,children:[]}):W.children.length>0&&x(O,W.children)}return x(C,l),l}const M=()=>{var l;if(!c.value)return;T.value=!0;let C={article:((l=s.value)==null?void 0:l._id)||"",content:c.value,parentComment:u.value||"",createdBy:a.user._id,like:0,dislike:0,updatedAt:new Date,createdAt:new Date,isDeleted:!1};T.value=!1,u.value=null,g.createComment(C).then(x=>{x.success?(c.value="",Z.success("publish comment successfully!")):Z.error(x.error)})};function L(C){var l;C._id&&(u.value=C._id),A.value="Replay to: "+C.author.username,(l=r.value)==null||l.focus()}function j(){var C;t.push({path:"/publish",query:{_id:((C=s.value)==null?void 0:C._id)+""}})}const k=()=>new Promise(async C=>{var l,x;(l=s.value)!=null&&l._id&&await v.deleteById((x=s.value)==null?void 0:x._id).then(O=>{console.log(O),O.success?(Z.success("Delete article successfully!"),setTimeout(()=>{t.push("/article")},wt),C(!0)):C(!1)}).catch(O=>{C(!1)})}),N=C=>{Z.warning("Delete operation canceled")};return(C,l)=>{const x=ke,O=$n,Y=Et,F=ne("v-md-preview"),W=bn,ge=cn,Xe=Ce,We=Bt,we=Vt,Ve=Fe,Be=Wt,Ge=Tt;return R(),V(Be,{spinning:ze(_)},{default:w(()=>{var Te,Pe;return[s.value?(R(),ie("div",zn,[o(W,{title:s.value.title,class:"article-detail-container",avatar:{src:(Te=p.value)==null?void 0:Te.avatar},breadcrumb:{routes:I},onBack:l[0]||(l[0]=()=>C.$router.go(-1))},Ct({tags:w(()=>[(R(!0),ie(he,null,be(b,X=>(R(),V(Y,{color:X.color,key:X._id},{default:w(()=>[ue(ae(X.name),1)]),_:2},1032,["color"]))),128))]),default:w(()=>[o(F,{text:s.value.content},null,8,["text"])]),_:2},[s.value.createdBy==((Pe=m.value)==null?void 0:Pe._id)?{name:"extra",fn:w(()=>[o(x,{type:"primary",onClick:j},{default:w(()=>l[2]||(l[2]=[ue("Edit")])),_:1}),o(O,{title:"Ready to delete?",onConfirm:k,onCancel:N},{default:w(()=>[o(x,{type:"primary",danger:""},{default:w(()=>l[3]||(l[3]=[ue("Delete")])),_:1})]),_:1})]),key:"0"}:void 0]),1032,["title","avatar","breadcrumb"]),o(ge,{style:{height:"2px"}}),o(Be,{spinning:ze($)},{default:w(()=>[(R(!0),ie(he,null,be(h,X=>(R(),V(In,{key:X._id+"",comment:X,onReplay:L},null,8,["comment"]))),128)),o(Ve,{class:"comment-input-container"},{avatar:w(()=>{var X,Oe;return[o(Xe,{src:(X=p.value)==null?void 0:X.avatar,alt:(Oe=p.value)==null?void 0:Oe.username},null,8,["src","alt"])]}),content:w(()=>[o(we,null,{default:w(()=>[o(We,{value:c.value,"onUpdate:value":l[1]||(l[1]=X=>c.value=X),rows:4,placeholder:A.value,ref_key:"comment_input",ref:r},null,8,["value","placeholder"])]),_:1}),o(we,null,{default:w(()=>[o(x,{"html-type":"submit",loading:T.value,type:"primary",onClick:M},{default:w(()=>l[4]||(l[4]=[ue(" Add Comment ")])),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["spinning"])])):(R(),V(Ge,{key:1}))]}),_:1},8,["spinning"])}}}),Vn=Pt(Dn,[["__scopeId","data-v-d4c6f362"]]);export{Vn as default};
