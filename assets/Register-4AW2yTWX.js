import{d as P,r as F,x as k,o as E,c as L,b as s,w as r,e as l,f as u,au as h,as as m,av as B,aw as C,cp as R,B as A,_ as S,h as q}from"./index-KJpxIHKO.js";import{U as z}from"./UserService-CadC1CVG.js";import{G as I}from"./Glassmorphism-BaYNwB6m.js";import{L as f,F as N}from"./loading-BO2_a-qK.js";import{L as V}from"./Link-BDyc8XrW.js";import{_ as Z}from"./FormItem-BA_2pT1-.js";import"./request-CxKKcrXY.js";import"./index-BBFuvo6y.js";import"./_flatRest-DMNDdPXy.js";import"./transButton-CmekS0CM.js";const G={class:"register"},T=P({__name:"Register",setup(j){const _=h(),p=z.getInstance(),o=F({email:"",username:"",password:""}),c=a=>{f.show(),p.register(a.username,a.email,a.password).then(e=>{e.success?(m.success("Regsiter successfully!"),setTimeout(()=>{_.push({path:"/login"})},B)):m.error(e.error),f.hide()})},g=a=>{for(let e of a.errorFields)for(let n of e.errors)m.error(n)},w=k(()=>!(o.email&&o.password));function v(){o.email.length==0?m.error("Please input your email first"):p.resendConfirmationEmail(o.email)}return(a,e)=>{const n=C,i=Z,b=R,y=A,d=V,x=S,U=N;return E(),L("div",G,[s(I,{opacity:.6,"border-radius":5},{default:r(()=>[s(U,{model:o,name:"normal_register",class:"register-form","label-col":{span:6},onFinish:c,onFinishFailed:g},{default:r(()=>[e[9]||(e[9]=l("h2",{class:"register-form-title"},"Sign up",-1)),s(i,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{min:3,message:"Username length must large than 3"},{max:16,message:"Username length must less than 16"}]},{default:r(()=>[s(n,{value:o.username,"onUpdate:value":e[0]||(e[0]=t=>o.username=t),placeholder:"Username"},{prefix:r(()=>e[3]||(e[3]=[l("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(i,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,message:"Email address format not correct"}]},{default:r(()=>[s(n,{value:o.email,"onUpdate:value":e[1]||(e[1]=t=>o.email=t),placeholder:"Email"},{prefix:r(()=>e[4]||(e[4]=[l("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(i,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:8,max:32,message:"Password should in range of (8, 32)"}]},{default:r(()=>[s(b,{value:o.password,"onUpdate:value":e[2]||(e[2]=t=>o.password=t),placeholder:"Password"},{prefix:r(()=>e[5]||(e[5]=[l("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(i,null,{default:r(()=>[s(y,{disabled:w.value,type:"primary","html-type":"submit",class:"register-form-button"},{default:r(()=>e[6]||(e[6]=[u(" Sign up ")])),_:1},8,["disabled"]),s(x,{justify:"space-between"},{default:r(()=>[s(d,{href:"#/login"},{default:r(()=>e[7]||(e[7]=[u("Login now!")])),_:1}),s(d,{type:"link",onClick:v},{default:r(()=>e[8]||(e[8]=[u("Resend confirm email")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),X=q(T,[["__scopeId","data-v-05e5e2cc"]]);export{X as default};
