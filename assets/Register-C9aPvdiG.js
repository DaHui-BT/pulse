import{d as B,r as E,x as F,o as A,c as L,b as s,w as r,e as u,f as g,au as z,as as p,av as C,aw as R,cp as Z,B as q,_ as S,h as T}from"./index-BN8jzHgm.js";import{U as I}from"./UserService-DlP-2K9R.js";import{G as N}from"./Glassmorphism-DIp2Gr-B.js";import{L as w,F as V}from"./loading-BeynKBQk.js";import{L as D}from"./Link-CpSYjcNm.js";import{_ as G}from"./FormItem-Cu9Ztipg.js";import"./request-CxKKcrXY.js";import"./index-CnMQl3Is.js";import"./_flatRest-CcxQIywl.js";import"./transButton-CaHdoCRC.js";function $(){let m=null;function d(f,i=1e3,t=null,..._){m&&clearTimeout(m),m=setTimeout(()=>{f(_)},i)}return d}const j={class:"register"},J=B({__name:"Register",setup(m){const d=z(),f=$(),i=I.getInstance(),t=E({email:"",username:"",password:""}),_=a=>{w.show(),i.register(a.username,a.email,a.password).then(e=>{e.success?(p.success("Regsiter successfully!"),setTimeout(()=>{d.push({path:"/login"})},C)):p.error(e.error),w.hide()})},x=a=>{for(let e of a.errorFields)for(let o of e.errors)p.error(o)},y=F(()=>!(t.email&&t.password));function U(a,e){return new Promise((o,n)=>{e.length<4&&o(!1),f(()=>{i.existUserByUsername(e).then(c=>{c.data?o(!0):n(!1)})},1e3)})}function v(){t.email.length==0?p.error("Please input your email first"):i.resendConfirmationEmail(t.email)}return(a,e)=>{const o=R,n=G,c=Z,h=q,b=D,P=S,k=V;return A(),L("div",j,[s(N,{opacity:.6,"border-radius":5},{default:r(()=>[s(k,{model:t,name:"normal_register",class:"register-form","label-col":{span:6},onFinish:_,onFinishFailed:x},{default:r(()=>[e[9]||(e[9]=u("h2",{class:"register-form-title"},"Sign up",-1)),s(n,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{min:4,message:"Username length must large than 3"},{max:16,message:"Username length must less than 16"},{message:"Username already exist",validator:U}]},{default:r(()=>[s(o,{value:t.username,"onUpdate:value":e[0]||(e[0]=l=>t.username=l),placeholder:"Username"},{prefix:r(()=>e[3]||(e[3]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1},8,["rules"]),s(n,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,message:"Email address format not correct"}]},{default:r(()=>[s(o,{value:t.email,"onUpdate:value":e[1]||(e[1]=l=>t.email=l),placeholder:"Email"},{prefix:r(()=>e[4]||(e[4]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:8,max:32,message:"Password should be range (8, 32)!"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,32}$/,message:"Both letters and numbers required"}]},{default:r(()=>[s(c,{value:t.password,"onUpdate:value":e[2]||(e[2]=l=>t.password=l),placeholder:"Password"},{prefix:r(()=>e[5]||(e[5]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,null,{default:r(()=>[s(h,{disabled:y.value,type:"primary","html-type":"submit",class:"register-form-button"},{default:r(()=>e[6]||(e[6]=[g(" Sign up ")])),_:1},8,["disabled"]),s(P,{justify:"space-between"},{default:r(()=>[s(b,{href:"#/login"},{default:r(()=>e[7]||(e[7]=[g("Login now!")])),_:1}),s(b,{type:"link",onClick:v},{default:r(()=>e[8]||(e[8]=[g("Resend confirm email")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),re=T(J,[["__scopeId","data-v-f6564ddc"]]);export{re as default};
