import{d as k,r as B,v as E,o as F,c as A,a as s,w as r,b as l,e as d,u as L,ar as m,au as z,av as C,cu as R,B as Z,_ as q,f as S}from"./index-Ba7BTyn2.js";import{U as I}from"./UserService-DRjuhHmk.js";import{G as N}from"./Glassmorphism-Z0Q-IPeF.js";import{L as _,F as V}from"./loading-Dt7cxAXi.js";import{u as D}from"./debounce-fV_BjVKv.js";import{L as G}from"./Link-DQjZROlW.js";import{_ as T}from"./FormItem-CSQuUzAA.js";import"./request-thOeSjyk.js";import"./index-tyPRltW9.js";import"./_flatRest-hVIAHiNU.js";import"./Base-DUIpGm0_.js";const $={class:"register"},j=k({__name:"Register",setup(J){const c=L(),g=D(),u=I.getInstance(),a=B({email:"",username:"",password:""}),b=t=>{_.show(),u.register(t.username,t.email,t.password).then(e=>{e.success?(m.success("Regsiter successfully!"),setTimeout(()=>{c.push({path:"/login"})},z)):m.error(e.error),_.hide()})},w=t=>{for(let e of t.errorFields)for(let o of e.errors)m.error(o)},y=E(()=>!(a.email&&a.password));function v(t,e){return new Promise((o,n)=>{e.length<4&&o(!1),g(()=>{u.existUserByUsername(e).then(p=>{p.data?o(!0):n(!1)})},1e3)})}function x(){a.email.length==0?m.error("Please input your email first"):u.resendConfirmationEmail(a.email)}return(t,e)=>{const o=C,n=T,p=R,U=Z,f=G,P=q,h=V;return F(),A("div",$,[s(N,{opacity:.6,"border-radius":5},{default:r(()=>[s(h,{model:a,name:"normal_register",class:"register-form","label-col":{span:6},onFinish:b,onFinishFailed:w},{default:r(()=>[e[9]||(e[9]=l("h2",{class:"register-form-title"},"Sign up",-1)),s(n,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{min:4,message:"Username length must large than 3"},{max:16,message:"Username length must less than 16"},{message:"Username already exist",validator:v}]},{default:r(()=>[s(o,{value:a.username,"onUpdate:value":e[0]||(e[0]=i=>a.username=i),placeholder:"Username"},{prefix:r(()=>e[3]||(e[3]=[l("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1},8,["rules"]),s(n,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,message:"Email address format not correct"}]},{default:r(()=>[s(o,{value:a.email,"onUpdate:value":e[1]||(e[1]=i=>a.email=i),placeholder:"Email"},{prefix:r(()=>e[4]||(e[4]=[l("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:8,max:32,message:"Password should be range (8, 32)!"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,32}$/,message:"Both letters and numbers required"}]},{default:r(()=>[s(p,{value:a.password,"onUpdate:value":e[2]||(e[2]=i=>a.password=i),placeholder:"Password"},{prefix:r(()=>e[5]||(e[5]=[l("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,null,{default:r(()=>[s(U,{disabled:y.value,type:"primary","html-type":"submit",class:"register-form-button"},{default:r(()=>e[6]||(e[6]=[d(" Sign up ")])),_:1},8,["disabled"]),s(P,{justify:"space-between"},{default:r(()=>[s(f,{href:"#/login"},{default:r(()=>e[7]||(e[7]=[d("Login now!")])),_:1}),s(f,{type:"link",onClick:x},{default:r(()=>e[8]||(e[8]=[d("Resend confirm email")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),ae=S(j,[["__scopeId","data-v-4e3c0340"]]);export{ae as default};
