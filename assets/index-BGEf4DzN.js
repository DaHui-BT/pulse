import{d as P,I as j,h as T,n as A,o as q,M as L,p as r,q as y,c as o,K as n,O as _,aT as E,t as d,aU as h,N as v,x as m,C as u,F as x,y as K,P as G}from"./index-SOpI9FpR.js";import{A as H,T as J}from"./ArticleService-CstKfWSD.js";import{S as Q,M as R}from"./StarOutlined-DyBJUeFB.js";import{L as W}from"./LikeOutlined-xREfPHsF.js";import{_ as X}from"./index-C90eshwa.js";import{_ as Y,F as Z}from"./index-C_5c69P6.js";import{P as tt,_ as et,a as at,L as nt,b as ot}from"./Paragraph-CAA6ktWl.js";import{S as st}from"./index-BMyPdBHB.js";import{T as it}from"./Title-Dm-7efyC.js";import"./index-C5jAu09r.js";import"./compact-item-BC1Pdjk_.js";import"./request-bqFMHjJ2.js";import"./TextArea-CAlpz53q.js";import"./SearchOutlined-BP9NBdOW.js";import"./index-7p8IW_ed.js";import"./isSymbol-CW36MqQr.js";import"./debounce-Bgu7iTiv.js";import"./RightOutlined-DerZwMMG.js";import"./eagerComputed-B7P1C1Xq.js";import"./Base-CHPoRBu2.js";import"./List-ByU_8-H-.js";const rt=["href"],lt=P({__name:"index",setup(C){const S=j(),l=T(!0),f=H.getInstance(),c=A([]),p=T(""),t=A({current:1,size:10,total:0,pages:1});q(g);async function g(i={}){var s;l.value=!0,(!i.title||((s=i.title)==null?void 0:s.length)===0)&&delete i.title,c.splice(0,c.length),c.push(...Array(t.size).fill({})),f.findArticles(i,{current:t.current,size:t.size}).then(e=>{e.success&&e.data?(c.splice(0,c.length),c.push(...e.data.articles||[]),t.total=e.data.pagination.total,t.current=e.data.pagination.current,t.size=e.data.pagination.size,t.pages=e.data.pagination.pages):L.error(e.error)}).catch(e=>L.error(e.message)).finally(()=>l.value=!1)}function M(){t.current=1,p.value.length===0?g():g({title:p.value})}function N(i){t.current=i,g({title:p.value})}const w=i=>{for(let s of S.tags)if(i==s._id)return s.name};return(i,s)=>{const e=X,B=Y,F=Z,O=J,z=G,V=tt,D=et,I=st,U=at,$=nt,b=ot;return r(),y(x,null,[o(F,null,{default:n(()=>[o(B,null,{default:n(()=>[o(e,{value:p.value,"onUpdate:value":s[0]||(s[0]=a=>p.value=a),valueModifiers:{trim:!0},placeholder:"input search text",onSearch:M},null,8,["value"])]),_:1})]),_:1}),o($,{"item-layout":"vertical",size:"large","data-source":c},{renderItem:n(({item:a})=>[(r(),_(U,{key:a.title,class:"content-item"},E({default:n(()=>[o(I,{loading:l.value,active:""},{default:n(()=>[o(D,null,{title:n(()=>[o(z,{justify:"space-between",gap:"10",class:"title-container"},{default:n(()=>[d("a",{href:`#/article-detail?_id=${a._id}`},u(a.title),9,rt),o(z,{gap:20},{default:n(()=>[(r(!0),y(x,null,K(a.tags,k=>(r(),_(O,{color:"cyan",key:k},{default:n(()=>[m(u(w(k)),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),description:n(()=>[o(V,{ellipsis:{rows:3},content:a.description},null,8,["content"])]),_:2},1024)]),_:2},1032,["loading"])]),_:2},[l.value?void 0:{name:"actions",fn:n(()=>[d("span",null,[(r(),_(h(v(Q)),{style:{"margin-right":"8px"}})),m(" "+u(a.statistics.collections),1)]),d("span",null,[(r(),_(h(v(W)),{style:{"margin-right":"8px"}})),m(" "+u(a.statistics.stars),1)]),d("span",null,[(r(),_(h(v(R)),{style:{"margin-right":"8px"}})),m(" "+u(a.statistics.comments),1)])]),key:"0"}]),1024))]),_:1},8,["data-source"]),o(b,{class:"article-pagination",current:t.current,"onUpdate:current":s[1]||(s[1]=a=>t.current=a),defaultPageSize:t.size,total:t.total,"show-less-items":"",onChange:N},null,8,["current","defaultPageSize","total"])],64)}}}),Nt=P({__name:"index",setup(C){return(S,l)=>{const f=it;return r(),y(x,null,[o(f,{level:2},{default:n(()=>l[0]||(l[0]=[m("Article")])),_:1}),o(lt)],64)}}});export{Nt as default};
