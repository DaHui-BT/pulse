import{d as O,I as G,h as S,n as z,o as H,M,p as i,q as T,c as a,K as n,P as m,aU as J,t as f,aV as k,O as L,x as g,C as d,F as P,y as R,Q as W}from"./index-CsOaHWZQ.js";import{A as X}from"./ArticleService-D4JvvKcv.js";import{S as Y,M as Z}from"./StarOutlined-DPNkF6c6.js";import{L as tt}from"./LikeOutlined-CMGjdO_r.js";import{a as et,S as at,T as nt}from"./Title-Yq9JESmp.js";import{_ as ot}from"./Search-BqZ9Hg3i.js";import"./index-Del2y2bQ.js";import{_ as st,F as lt}from"./index-DZX6ZFdi.js";import{T as it}from"./index-BCVWfUXc.js";import{P as rt}from"./Paragraph-CED5ZpRN.js";import{_ as ct,a as ut,L as pt,b as _t}from"./index-8wtIQa2z.js";import"./request-zUbwgvDi.js";import"./index-DC9JQhQ7.js";import"./index-BfPHKHhH.js";import"./Base-uFvm4X4A.js";import"./SearchOutlined-C7J3QI4M.js";import"./Col-BAkveVXM.js";import"./RightOutlined-BSKPiX3E.js";const mt=["href"],dt=O({__name:"index",setup(V){const v=G(),r=S(!0),h=X.getInstance(),c=z([]),u=S(""),p=S(),B=z(v.tags.map(t=>({value:t._id,label:t.name}))),o=z({current:1,size:10,total:0,pages:1});H(y);async function y(t={}){var s;r.value=!0,(!t.title||((s=t.title)==null?void 0:s.length)===0)&&delete t.title,c.splice(0,c.length),c.push(...Array(o.size).fill({})),h.findArticleInfoList(t,{current:o.current,size:o.size}).then(l=>{l.success&&l.data?(c.splice(0,c.length),c.push(...l.data.articles||[]),o.total=l.data.pagination.total,o.current=l.data.pagination.current,o.size=l.data.pagination.size,o.pages=l.data.pagination.pages):M.error(l.error)}).catch(l=>M.error(l.message)).finally(()=>r.value=!1)}function F(){o.current=1;let t={};p.value&&p.value.length>0&&(t.tags=[p.value+""]),u.value.length>0&&(t.title=u.value),y(t)}function I(t){o.current=t,y({title:u.value})}const N=t=>{for(let s of v.tags)if(t==s._id)return s.name};return(t,s)=>{const l=et,w=st,U=ot,x=W,$=lt,b=it,D=rt,q=ct,j=at,E=ut,K=pt,Q=_t;return i(),T(P,null,[a($,null,{default:n(()=>[a(x,{gap:"10"},{default:n(()=>[a(w,null,{default:n(()=>[a(l,{value:p.value,"onUpdate:value":s[0]||(s[0]=e=>p.value=e),mode:"tags",style:{"min-width":"150px"},placeholder:"文章标签",options:B},null,8,["value","options"])]),_:1}),a(w,null,{default:n(()=>[a(U,{value:u.value,"onUpdate:value":s[1]||(s[1]=e=>u.value=e),valueModifiers:{trim:!0},placeholder:"输入搜索文本",onSearch:F},null,8,["value"])]),_:1})]),_:1})]),_:1}),a(K,{"item-layout":"vertical",size:"large","data-source":c},{renderItem:n(({item:e})=>[(i(),m(E,{key:e.title,class:"content-item"},J({default:n(()=>[a(j,{loading:r.value,active:""},{default:n(()=>[a(q,null,{title:n(()=>[a(x,{justify:"space-between",gap:"10",class:"title-container"},{default:n(()=>[f("a",{href:`#/article-detail?_id=${e._id}`},d(e.title),9,mt),a(x,{gap:20},{default:n(()=>[(i(!0),T(P,null,R(e.tags,_=>(i(),m(b,{color:"cyan",key:_},{default:n(()=>[g(d(N(_)),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),description:n(()=>[a(D,{ellipsis:{rows:3},content:e.description},null,8,["content"])]),_:2},1024)]),_:2},1032,["loading"])]),_:2},[!r.value&&e.statistics?{name:"actions",fn:n(()=>{var _,A,C;return[f("span",null,[(i(),m(k(L(Y)),{style:{"margin-right":"8px"}})),g(" "+d((_=e.statistics)==null?void 0:_.collections),1)]),f("span",null,[(i(),m(k(L(tt)),{style:{"margin-right":"8px"}})),g(" "+d((A=e.statistics)==null?void 0:A.stars),1)]),f("span",null,[(i(),m(k(L(Z)),{style:{"margin-right":"8px"}})),g(" "+d((C=e.statistics)==null?void 0:C.comments),1)])]}),key:"0"}:void 0]),1024))]),_:1},8,["data-source"]),a(Q,{class:"article-pagination",current:o.current,"onUpdate:current":s[2]||(s[2]=e=>o.current=e),defaultPageSize:o.size,total:o.total,"show-less-items":"",onChange:I},null,8,["current","defaultPageSize","total"])],64)}}}),Bt=O({__name:"index",setup(V){return(v,r)=>{const h=nt;return i(),T(P,null,[a(h,{level:2},{default:n(()=>r[0]||(r[0]=[g("文章")])),_:1}),a(dt)],64)}}});export{Bt as default};
