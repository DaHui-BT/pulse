import{d as D,I as j,h as d,n as g,o as E,M as z,p as u,q as S,c as e,K as n,x as k,C as f,P as x,t as K,F,y as O,Q}from"./index-CsOaHWZQ.js";import{F as G}from"./file.service-1Vyq2a0K.js";import{T as H,a as J,S as R}from"./Title-Yq9JESmp.js";import{_ as W,F as X}from"./index-DZX6ZFdi.js";import{T as Y}from"./index-BCVWfUXc.js";import{P as Z}from"./Paragraph-CED5ZpRN.js";import{_ as tt,a as et,L as at,b as nt}from"./index-8wtIQa2z.js";import{_ as ot}from"./Search-BqZ9Hg3i.js";import"./request-zUbwgvDi.js";import"./index-DC9JQhQ7.js";import"./index-BfPHKHhH.js";import"./Base-uFvm4X4A.js";import"./SearchOutlined-C7J3QI4M.js";import"./Col-BAkveVXM.js";import"./RightOutlined-BSKPiX3E.js";const lt=["href"],kt=D({__name:"index",setup(st){const v=j(),_=d(!0),T=G.getInstance(),i=g([]),r=d(""),c=d(),P=g(v.tags.map(t=>({value:t._id,label:t.name}))),a=g({current:1,size:10,total:0,pages:1});E(p);async function p(t={}){var o;_.value=!0,console.log(t),(!t.title||((o=t.title)==null?void 0:o.length)===0)&&delete t.title,i.splice(0,i.length),i.push(...Array(a.size).fill({})),T.findFiles(t,{current:a.current,size:a.size}).then(l=>{l.success&&l.data?(i.splice(0,i.length),i.push(...l.data.files||[]),a.total=l.data.pagination.total,a.current=l.data.pagination.current,a.size=l.data.pagination.size,a.pages=l.data.pagination.pages):z.error(l.error)}).catch(l=>z.error(l.message)).finally(()=>{_.value=!1})}function w(){a.current=1;let t={};c.value&&c.value.length>0&&(t.tags=[c.value+""]),r.value.length>0&&(t.title=r.value),p(t)}function B(t){a.current=t,p({title:r.value})}const C=t=>{for(let o of v.tags)if(t==o._id)return o.name};return(t,o)=>{const l=H,L=J,h=W,N=ot,m=Q,V=X,$=Y,b=Z,I=tt,M=R,U=et,q=at,A=nt;return u(),S(F,null,[e(l,{level:2},{default:n(()=>[k(f(t.$t("repository")),1)]),_:1}),e(V,null,{default:n(()=>[e(m,{gap:"10"},{default:n(()=>[e(h,null,{default:n(()=>[e(L,{value:c.value,"onUpdate:value":o[0]||(o[0]=s=>c.value=s),mode:"tags",style:{"min-width":"150px"},placeholder:"仓库标签",options:P},null,8,["value","options"])]),_:1}),e(h,null,{default:n(()=>[e(N,{value:r.value,"onUpdate:value":o[1]||(o[1]=s=>r.value=s),valueModifiers:{trim:!0},placeholder:"请输入搜索文本",onSearch:w},null,8,["value"])]),_:1})]),_:1})]),_:1}),e(q,{"item-layout":"vertical",size:"large","data-source":i},{renderItem:n(({item:s})=>[(u(),x(U,{key:s.title,class:"content-item"},{default:n(()=>[e(M,{loading:_.value,active:""},{default:n(()=>[e(I,null,{title:n(()=>[e(m,{justify:"space-between",gap:"10",class:"title-container"},{default:n(()=>[K("a",{href:`#/repository-detail?_id=${s._id}`},f(s.title),9,lt),e(m,{gap:20},{default:n(()=>[(u(!0),S(F,null,O(s.tags,y=>(u(),x($,{color:"cyan",key:y},{default:n(()=>[k(f(C(y)),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),description:n(()=>[e(b,{ellipsis:{rows:3},content:s.description},null,8,["content"])]),_:2},1024)]),_:2},1032,["loading"])]),_:2},1024))]),_:1},8,["data-source"]),e(A,{class:"article-pagination",current:a.current,"onUpdate:current":o[2]||(o[2]=s=>a.current=s),defaultPageSize:a.size,total:a.total,"show-less-items":"",onChange:B},null,8,["current","defaultPageSize","total"])],64)}}});export{kt as default};
