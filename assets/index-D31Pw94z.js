import{d as k,a3 as B,c as E,a4 as F,a5 as A,b as s,ai as a,a6 as m,a7 as d,aQ as L,aN as l,aR as z,am as C,af as Z}from"./index-Bkva_4QA.js";import{U as q}from"./UserService-NSEvKsOI.js";import{G as N}from"./Glassmorphism-DQrumAUf.js";import{L as _}from"./loading-AKYUUE4h.js";import{u as R}from"./debounce-fV_BjVKv.js";import{I as S,a as I}from"./index-C1Ljg8Gy.js";import{B as V}from"./index-D96tQXur.js";import{L as D}from"./Link-CKQYHDUn.js";import{_ as G,F as T}from"./index-pX09Tsbs.js";import"./request-CAHUC_tE.js";import"./index-lUIYzjzK.js";import"./isSymbol-LHpKateK.js";import"./TextArea-CX6guwJy.js";import"./compact-item-Bz9rI9db.js";import"./SearchOutlined-C5ZgqH4f.js";import"./Base-Chi73uKV.js";import"./debounce-C8MRqobG.js";const $={class:"register"},j=k({__name:"index",setup(J){const c=L(),g=R(),u=q.getInstance(),r=B({email:"",username:"",password:""}),b=o=>{_.show(),u.register(o.username,o.email,o.password).then(e=>{e.success?(l.success("Regsiter successfully!"),setTimeout(()=>{c.push({path:"/login"})},z)):l.error(e.error),_.hide()})},w=o=>{console.log(o);for(let e of o.errorFields)for(let t of e.errors)l.error(t)},x=E(()=>!(r.email&&r.password));function y(o,e){return new Promise((t,n)=>{e.length<4&&t(!1),g(()=>{u.existUserByUsername(e).then(p=>{p.data?n(!1):t(!0)})},1e3)})}function U(){r.email.length==0?l.error("Please input your email first"):u.resendConfirmationEmail(r.email)}return(o,e)=>{const t=S,n=G,p=I,v=V,f=D,P=C,h=T;return F(),A("div",$,[s(N,{opacity:.6,"border-radius":5},{default:a(()=>[s(h,{model:r,name:"normal_register",class:"register-form","label-col":{span:6},onFinish:b,onFinishFailed:w},{default:a(()=>[e[9]||(e[9]=m("h2",{class:"register-form-title"},"Sign up",-1)),s(n,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{min:4,message:"Username length must large than 3"},{max:16,message:"Username length must less than 16"},{message:"Username already exist",validator:y}]},{default:a(()=>[s(t,{value:r.username,"onUpdate:value":e[0]||(e[0]=i=>r.username=i),placeholder:"Username"},{prefix:a(()=>e[3]||(e[3]=[m("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1},8,["rules"]),s(n,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,message:"Email address format not correct"}]},{default:a(()=>[s(t,{value:r.email,"onUpdate:value":e[1]||(e[1]=i=>r.email=i),placeholder:"Email"},{prefix:a(()=>e[4]||(e[4]=[m("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:8,max:32,message:"Password should be range (8, 32)!"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,32}$/,message:"Both letters and numbers required"}]},{default:a(()=>[s(p,{value:r.password,"onUpdate:value":e[2]||(e[2]=i=>r.password=i),placeholder:"Password"},{prefix:a(()=>e[5]||(e[5]=[m("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,null,{default:a(()=>[s(v,{disabled:x.value,type:"primary","html-type":"submit",class:"register-form-button"},{default:a(()=>e[6]||(e[6]=[d(" Sign up ")])),_:1},8,["disabled"]),s(P,{justify:"space-between"},{default:a(()=>[s(f,{href:"#/login"},{default:a(()=>e[7]||(e[7]=[d("Login now!")])),_:1}),s(f,{type:"link",onClick:U},{default:a(()=>e[8]||(e[8]=[d("Resend confirm email")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),le=Z(j,[["__scopeId","data-v-adf6eb73"]]);export{le as default};
