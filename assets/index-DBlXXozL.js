import{T as U,A as V}from"./ArticleService-1NDHYfO1.js";import{d as T,aj as I,r as h,a6 as i,an as c,ak as a,b as n,aV as G,a8 as x,aW as A,ao as v,a9 as f,af as d,a7 as B,ab as W,aa as N,ap as O,ah as $,a5 as C,g as X,h as Y,aR as Z,aX as H,aP as P,aY as J}from"./index-C65JRPnL.js";import{S as K,M as Q}from"./StarOutlined-DtHAYNr3.js";import{L as tt}from"./LikeOutlined-CHjzlvjm.js";import{P as et,_ as at,S as nt,a as st,L as ot,b as lt}from"./Paragraph-B1LTSU_R.js";import{S as j}from"./index-Dt6m71WR.js";import{T as it}from"./Title-yo60WjC4.js";import{_ as rt,F as ct}from"./index-CFjYZmsW.js";import{_ as _t}from"./FormItem-CD720ya9.js";import"./request-CV5hgAz3.js";import"./index-BnEQvMB4.js";import"./TextArea-dYSLGRQh.js";import"./List-C-4sr_Wj.js";import"./Base-Nnj2Ubqs.js";import"./isPlainObject-C4LvJLV6.js";import"./useBreakpoint-DriKUw-n.js";import"./eagerComputed-BcLhIT-E.js";import"./isSymbol-BWNvmBAv.js";import"./debounce-C5-2cbFb.js";import"./toNumber-COwC2iKS.js";const pt=["href"],ut=T({__name:"index",props:{articleList:{type:Object,required:!0}},setup(L){const k=I(),_=h(!1),p=h(!1),l=y=>{for(let m of k.tags)if(y==m._id)return m.name};return(y,m)=>{const u=U,s=O,S=et,r=at,z=nt,b=st,o=ot,t=j;return i(),c(t,{spinning:p.value},{default:a(()=>[n(o,{"item-layout":"vertical",size:"large","data-source":L.articleList},{renderItem:a(({item:e})=>[(i(),c(b,{key:e.title,class:"content-item"},G({default:a(()=>[n(z,{loading:_.value,active:"",avatar:""},{default:a(()=>[n(r,null,{title:a(()=>[n(s,{justify:"space-between",gap:"10",class:"title-container"},{default:a(()=>[x("a",{href:`#/article-detail?_id=${e._id}`},d(e.title),9,pt),n(s,{gap:20},{default:a(()=>[(i(!0),B(N,null,W(e.tags,g=>(i(),c(u,{color:"cyan",key:g},{default:a(()=>[f(d(l(g)),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),description:a(()=>[n(S,{ellipsis:{rows:3},content:e.description},null,8,["content"])]),_:2},1024)]),_:2},1032,["loading"])]),_:2},[_.value?void 0:{name:"actions",fn:a(()=>[x("span",null,[(i(),c(A(v(K)),{style:{"margin-right":"8px"}})),f(" "+d(e.statistics.collections),1)]),x("span",null,[(i(),c(A(v(tt)),{style:{"margin-right":"8px"}})),f(" "+d(e.statistics.stars),1)]),x("span",null,[(i(),c(A(v(Q)),{style:{"margin-right":"8px"}})),f(" "+d(e.statistics.comments),1)])]),key:"0"}]),1024))]),_:1},8,["data-source"])]),_:1},8,["spinning"])}}}),mt=$(ut,[["__scopeId","data-v-9a9cc6b8"]]),gt=T({__name:"index",setup(L){const k=I(),_=Z(),p=h(!0);let l=C([]);const y=C(k.tags),m=V.getInstance(),u=h(null),s=C({current:1,size:10,total:0}),S=h(H.PAGE_SIZE);async function r(o={}){m.findArticles(o,{current:1,size:S.value}).then(t=>{var e;if(t.success&&t.data){let g=((e=t.data)==null?void 0:e.articles)||[];l.splice(0,l.length),l.push(...g||[]),s.total=t.data.pagination.total,s.current=t.data.pagination.current,s.size=t.data.pagination.size}else P.error(t.error);p.value=!1}).catch(()=>p.value=!1)}X(()=>{if(_.query.search&&_.query.search.length>0){let o=_.query.search+"";r({title:o})}else r()}),Y(_,o=>{if(o.query.search&&o.query.search.length>0){let t=o.query.search+"";r({title:t})}else r()});function z(){s.current=1,console.log(u.value),(u.value||"").trim().length===0?r():r({title:u.value||""})}function b(o){p.value=!0,m.findArticles({},{page:o-1,pageSize:S.value}).then(t=>{var e;t.success?(l.splice(0,l.length),l.push(...((e=t.data)==null?void 0:e.articles)||[])):P.error(t.error),p.value=!1})}return(o,t)=>{const e=it,g=rt,w=_t,D=ct,E=O,F=J,M=lt,R=j;return i(),B(N,null,[n(e,{level:2},{default:a(()=>t[2]||(t[2]=[f("Article")])),_:1}),n(D,null,{default:a(()=>[n(w,null,{default:a(()=>[n(g,{value:u.value,"onUpdate:value":t[0]||(t[0]=q=>u.value=q),placeholder:"input search text",onSearch:z},null,8,["value"])]),_:1})]),_:1}),n(R,{spinning:p.value},{default:a(()=>[v(l).length>0&&y.length>0?(i(),c(E,{key:0,class:"article",vertical:""},{default:a(()=>[n(mt,{"article-list":v(l)},null,8,["article-list"])]),_:1})):(i(),c(F,{key:1})),n(M,{class:"article-pagination",current:s.current,"onUpdate:current":t[1]||(t[1]=q=>s.current=q),defaultPageSize:s.size,total:s.total/s.size,"show-less-items":"",onChange:b},null,8,["current","defaultPageSize","total"])]),_:1},8,["spinning"])],64)}}}),$t=$(gt,[["__scopeId","data-v-6031dd4b"]]);export{$t as default};
