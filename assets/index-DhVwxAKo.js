import{d as E,n as k,G as B,p as F,q as A,c as s,K as r,t as m,x as d,aw as L,M as l,ay as q,P as z,E as C}from"./index-SOpI9FpR.js";import{U as Z}from"./UserService-DIOOPM3i.js";import{G as S}from"./Glassmorphism-I4axo4FG.js";import{L as _}from"./loading-jO_UGmBp.js";import{u as G}from"./debounce-fV_BjVKv.js";import{I,a as N}from"./index-C90eshwa.js";import{B as R}from"./index-C5jAu09r.js";import{L as V}from"./Link-dStxJnTe.js";import{_ as D,F as M}from"./index-C_5c69P6.js";import"./request-bqFMHjJ2.js";import"./index-7p8IW_ed.js";import"./isSymbol-CW36MqQr.js";import"./TextArea-CAlpz53q.js";import"./compact-item-BC1Pdjk_.js";import"./SearchOutlined-BP9NBdOW.js";import"./Base-CHPoRBu2.js";import"./debounce-Bgu7iTiv.js";const T={class:"register"},$=E({__name:"index",setup(j){const c=L(),g=G(),u=Z.getInstance(),o=k({email:"",username:"",password:""}),b=a=>{_.show(),u.register(a.username,a.email,a.password).then(e=>{e.success?(l.success("Regsiter successfully!"),setTimeout(()=>{c.push({path:"/login"})},q)):l.error(e.error),_.hide()})},w=a=>{console.log(a);for(let e of a.errorFields)for(let t of e.errors)l.error(t)},x=B(()=>!(o.email&&o.password));function y(a,e){return new Promise((t,n)=>{e.length<4&&t(!1),g(()=>{u.existUserByUsername(e).then(p=>{p.data?n(!1):t(!0)})},1e3)})}function U(){o.email.length==0?l.error("Please input your email first"):u.resendConfirmationEmail(o.email)}return(a,e)=>{const t=I,n=D,p=N,v=R,f=V,P=z,h=M;return F(),A("div",T,[s(S,{opacity:.6,"border-radius":5},{default:r(()=>[s(h,{model:o,name:"normal_register",class:"register-form","label-col":{span:6},onFinish:b,onFinishFailed:w},{default:r(()=>[e[9]||(e[9]=m("h2",{class:"register-form-title"},"Sign up",-1)),s(n,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"},{min:4,message:"Username length must large than 3"},{max:16,message:"Username length must less than 16"},{message:"Username already exist",validator:y}]},{default:r(()=>[s(t,{value:o.username,"onUpdate:value":e[0]||(e[0]=i=>o.username=i),placeholder:"Username"},{prefix:r(()=>e[3]||(e[3]=[m("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1},8,["rules"]),s(n,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"},{pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,message:"Email address format not correct"}]},{default:r(()=>[s(t,{value:o.email,"onUpdate:value":e[1]||(e[1]=i=>o.email=i),placeholder:"Email"},{prefix:r(()=>e[4]||(e[4]=[m("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"},{min:8,max:32,message:"Password should be range (8, 32)!"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,32}$/,message:"Both letters and numbers required"}]},{default:r(()=>[s(p,{value:o.password,"onUpdate:value":e[2]||(e[2]=i=>o.password=i),placeholder:"Password"},{prefix:r(()=>e[5]||(e[5]=[m("i",{class:"iconfont"},"",-1)])),_:1},8,["value"])]),_:1}),s(n,null,{default:r(()=>[s(v,{disabled:x.value,type:"primary","html-type":"submit",class:"register-form-button"},{default:r(()=>e[6]||(e[6]=[d(" Sign up ")])),_:1},8,["disabled"]),s(P,{justify:"space-between"},{default:r(()=>[s(f,{href:"#/login"},{default:r(()=>e[7]||(e[7]=[d("Login now!")])),_:1}),s(f,{type:"link",onClick:U},{default:r(()=>e[8]||(e[8]=[d("Resend confirm email")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),le=C($,[["__scopeId","data-v-adf6eb73"]]);export{le as default};
