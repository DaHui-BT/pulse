import{cx as Ce,aw as Ve,cy as je,i as We,cz as qe,cA as _e,cB as fe,cC as Ne,aQ as Re,A as Me,aT as Q,r as De,a6 as He,V as ie,y as N,X as $e,c7 as he,cD as Te,d as ze,D as Ue,J as Xe,x as C,cE as Qe,cF as Ye,cG as Ge,ap as Ke,b as Ze,z as ge,a1 as me,Q as Je,p as ne,m as B,s as ve,q as be,n as Be,l as Z,R as et,cH as ce}from"./index-Df9vkjUl.js";import{t as pe,a as tt,d as nt,e as rt,h as le,v as it,i as Ie,_ as at,j as lt,k as st,l as we,m as ae,n as ye,o as ot}from"./loading-DbInbvEp.js";import{e as ut,f as de,b as ct,c as Le,t as dt}from"./index-CvS3zidW.js";import{s as ft,o as ht,f as gt}from"./_flatRest-CYscQ-Ip.js";function Fe(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function Ee(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function se(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return Ee(r.overflowY,t)||Ee(r.overflowX,t)||function(a){var n=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch{return null}}(a);return!!n&&(n.clientHeight<a.scrollHeight||n.clientWidth<a.scrollWidth)}(e)}return!1}function re(e,t,r,a,n,i,u,h){return i<e&&u>t||i>e&&u<t?0:i<=e&&h<=r||u>=t&&h>=r?i-e-a:u>t&&h<r||i<e&&h>r?u-t+n:0}var Pe=function(e,t){var r=window,a=t.scrollMode,n=t.block,i=t.inline,u=t.boundary,h=t.skipOverflowHiddenElements,p=typeof u=="function"?u:function(xe){return xe!==u};if(!Fe(e))throw new TypeError("Invalid target");for(var P,O,k=document.scrollingElement||document.documentElement,M=[],y=e;Fe(y)&&p(y);){if((y=(O=(P=y).parentElement)==null?P.getRootNode().host||null:O)===k){M.push(y);break}y!=null&&y===document.body&&se(y)&&!se(document.documentElement)||y!=null&&se(y,h)&&M.push(y)}for(var T=r.visualViewport?r.visualViewport.width:innerWidth,L=r.visualViewport?r.visualViewport.height:innerHeight,V=window.scrollX||pageXOffset,I=window.scrollY||pageYOffset,x=e.getBoundingClientRect(),s=x.height,l=x.width,m=x.top,c=x.right,f=x.bottom,d=x.left,F=n==="start"||n==="nearest"?m:n==="end"?f:m+s/2,v=i==="center"?d+l/2:i==="end"?c:d,E=[],j=0;j<M.length;j++){var b=M[j],W=b.getBoundingClientRect(),R=W.height,D=W.width,o=W.top,g=W.right,w=W.bottom,A=W.left;if(a==="if-needed"&&m>=0&&d>=0&&f<=L&&c<=T&&m>=o&&f<=w&&d>=A&&c<=g)return E;var _=getComputedStyle(b),$=parseInt(_.borderLeftWidth,10),X=parseInt(_.borderTopWidth,10),q=parseInt(_.borderRightWidth,10),H=parseInt(_.borderBottomWidth,10),S=0,z=0,G="offsetWidth"in b?b.offsetWidth-b.clientWidth-$-q:0,U="offsetHeight"in b?b.offsetHeight-b.clientHeight-X-H:0,K="offsetWidth"in b?b.offsetWidth===0?0:D/b.offsetWidth:0,ee="offsetHeight"in b?b.offsetHeight===0?0:R/b.offsetHeight:0;if(k===b)S=n==="start"?F:n==="end"?F-L:n==="nearest"?re(I,I+L,L,X,H,I+F,I+F+s,s):F-L/2,z=i==="start"?v:i==="center"?v-T/2:i==="end"?v-T:re(V,V+T,T,$,q,V+v,V+v+l,l),S=Math.max(0,S+I),z=Math.max(0,z+V);else{S=n==="start"?F-o-X:n==="end"?F-w+H+U:n==="nearest"?re(o,w,R,X,H+U,F,F+s,s):F-(o+R/2)+U/2,z=i==="start"?v-A-$:i==="center"?v-(A+D/2)+G/2:i==="end"?v-g+q+G:re(A,g,D,$,q+G,v,v+l,l);var te=b.scrollLeft,J=b.scrollTop;F+=J-(S=Math.max(0,Math.min(J+S/ee,b.scrollHeight-R/ee+U))),v+=te-(z=Math.max(0,Math.min(te+z/K,b.scrollWidth-D/K+G)))}E.push({el:b,top:S,left:z})}return E};function Ae(e){return e===Object(e)&&Object.keys(e).length!==0}function mt(e,t){t===void 0&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach(function(a){var n=a.el,i=a.top,u=a.left;n.scroll&&r?n.scroll({top:i,left:u,behavior:t}):(n.scrollTop=i,n.scrollLeft=u)})}function vt(e){return e===!1?{block:"end",inline:"nearest"}:Ae(e)?e:{block:"start",inline:"nearest"}}function bt(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Ae(t)&&typeof t.behavior=="function")return t.behavior(r?Pe(e,t):[]);if(r){var a=vt(t);return mt(Pe(e,a),a.behavior)}}function pt(e,t){return ft(ht(e,t,ut),e+"")}function wt(e,t,r){var a=-1,n=e.length;t<0&&(t=-t>n?0:n+t),r=r>n?n:r,r<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(n);++a<n;)i[a]=e[a+t];return i}var oe=function(){return Ce.Date.now()},yt="Expected a function",Ft=Math.max,Et=Math.min;function Pt(e,t,r){var a,n,i,u,h,p,P=0,O=!1,k=!1,M=!0;if(typeof e!="function")throw new TypeError(yt);t=pe(t)||0,Ve(r)&&(O=!!r.leading,k="maxWait"in r,i=k?Ft(pe(r.maxWait)||0,t):i,M="trailing"in r?!!r.trailing:M);function y(c){var f=a,d=n;return a=n=void 0,P=c,u=e.apply(d,f),u}function T(c){return P=c,h=setTimeout(I,t),O?y(c):u}function L(c){var f=c-p,d=c-P,F=t-f;return k?Et(F,i-d):F}function V(c){var f=c-p,d=c-P;return p===void 0||f>=t||f<0||k&&d>=i}function I(){var c=oe();if(V(c))return x(c);h=setTimeout(I,L(c))}function x(c){return h=void 0,M&&a?y(c):(a=n=void 0,u)}function s(){h!==void 0&&clearTimeout(h),P=0,a=p=n=h=void 0}function l(){return h===void 0?u:x(oe())}function m(){var c=oe(),f=V(c);if(a=arguments,n=this,p=c,f){if(h===void 0)return T(p);if(k)return clearTimeout(h),h=setTimeout(I,t),y(p)}return h===void 0&&(h=setTimeout(I,t)),u}return m.cancel=s,m.flush=l,m}function Ot(e){return je(e)&&We(e)}function kt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Mt=Math.min;function Tt(e,t,r){for(var a=Ne,n=e[0].length,i=e.length,u=i,h=Array(i),p=1/0,P=[];u--;){var O=e[u];u&&t&&(O=de(O,qe(t))),p=Mt(O.length,p),h[u]=n>=120&&O.length>=120?new _e(u&&O):void 0}O=e[0];var k=-1,M=h[0];e:for(;++k<n&&P.length<p;){var y=O[k],T=y;if(y=y!==0?y:0,!(M?fe(M,T):a(P,T))){for(u=i;--u;){var L=h[u];if(!(L?fe(L,T):a(e[u],T)))continue e}M&&M.push(T),P.push(y)}}return P}function It(e){return Ot(e)?e:[]}var Lt=pt(function(e){var t=de(e,It);return t.length&&t[0]===e[0]?Tt(t):[]});function At(e,t){return t.length<2?e:ct(e,wt(t,0,-1))}function St(e,t){return t=Le(t,e),e=At(e,t),e==null||delete e[dt(kt(t))]}function xt(e){return Re(e)?void 0:e}var Ct=1,Vt=2,jt=4,Wt=gt(function(e,t){var r={};if(e==null)return r;var a=!1;t=de(t,function(i){return i=Le(i,e),a||(a=i.length>1),i}),tt(e,nt(e),r),a&&(r=rt(r,Ct|Vt|jt,xt));for(var n=t.length;n--;)St(r,t[n]);return r});function Se(e){let t=!1,r=e.length;const a=[];return e.length?new Promise((n,i)=>{e.forEach((u,h)=>{u.catch(p=>(t=!0,p)).then(p=>{r-=1,a[h]=p,!(r>0)&&(t&&i(a),n(a))})})}):Promise.resolve([])}function Oe(e){let t=!1;return e&&e.length&&e.every(r=>r.required?(t=!0,!1):!0),t}function ke(e){return e==null?[]:Array.isArray(e)?e:[e]}function ue(e,t,r){let a=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");const n=t.split(".");let i=0;for(let u=n.length;i<u-1&&!(!a&&!r);++i){const h=n[i];if(h in a)a=a[h];else{if(r)throw new Error("please transfer a valid name path to validate!");break}}return{o:a,k:n[i],v:a?a[n[i]]:null,isValid:a&&n[i]in a}}function qt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Me({}),r=arguments.length>2?arguments[2]:void 0;const a=le(Q(e)),n=De({}),i=He([]),u=s=>{N(Q(e),N(N({},le(a)),s)),$e(()=>{Object.keys(n).forEach(l=>{n[l]={autoLink:!1,required:Oe(Q(t)[l])}})})},h=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1?arguments[1]:void 0;return l.length?s.filter(m=>{const c=ke(m.trigger||"change");return Lt(c,l).length}):s};let p=null;const P=function(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=arguments.length>2?arguments[2]:void 0;const c=[],f={};for(let v=0;v<s.length;v++){const E=s[v],j=ue(Q(e),E,m);if(!j.isValid)continue;f[E]=j.v;const b=h(Q(t)[E],ke(l&&l.trigger));b.length&&c.push(O(E,j.v,b,l||{}).then(()=>({name:E,errors:[],warnings:[]})).catch(W=>{const R=[],D=[];return W.forEach(o=>{let{rule:{warningOnly:g},errors:w}=o;g?D.push(...w):R.push(...w)}),R.length?Promise.reject({name:E,errors:R,warnings:D}):{name:E,errors:R,warnings:D}}))}const d=Se(c);p=d;const F=d.then(()=>p===d?Promise.resolve(f):Promise.reject([])).catch(v=>{const E=v.filter(j=>j&&j.errors.length);return E.length?Promise.reject({values:f,errorFields:E,outOfDate:p!==d}):Promise.resolve(f)});return F.catch(v=>v),F},O=function(s,l,m){let c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const f=it([s],l,m,N({validateMessages:Ie},c),!!c.validateFirst);return n[s]?(n[s].validateStatus="validating",f.catch(d=>d).then(function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];var F;if(n[s].validateStatus==="validating"){const v=d.filter(E=>E&&E.errors.length);n[s].validateStatus=v.length?"error":"success",n[s].help=v.length?v.map(E=>E.errors):null,(F=r==null?void 0:r.onValidate)===null||F===void 0||F.call(r,s,!v.length,v.length?he(n[s].help[0]):null)}}),f):f.catch(d=>d)},k=(s,l)=>{let m=[],c=!0;s?Array.isArray(s)?m=s:m=[s]:(c=!1,m=i.value);const f=P(m,l||{},c);return f.catch(d=>d),f},M=s=>{let l=[];s?Array.isArray(s)?l=s:l=[s]:l=i.value,l.forEach(m=>{n[m]&&N(n[m],{validateStatus:"",help:null})})},y=s=>{const l={autoLink:!1},m=[],c=Array.isArray(s)?s:[s];for(let f=0;f<c.length;f++){const d=c[f];(d==null?void 0:d.validateStatus)==="error"&&(l.validateStatus="error",d.help&&m.push(d.help)),l.required=l.required||(d==null?void 0:d.required)}return l.help=m,l};let T=a,L=!0;const V=s=>{const l=[];i.value.forEach(m=>{const c=ue(s,m,!1),f=ue(T,m,!1);(L&&(r==null?void 0:r.immediate)&&c.isValid||!Te(c.v,f.v))&&l.push(m)}),k(l,{trigger:"change"}),L=!1,T=le(he(s))},I=r==null?void 0:r.debounce;let x=!0;return ie(t,()=>{i.value=t?Object.keys(Q(t)):[],!x&&r&&r.validateOnRuleChange&&k(),x=!1},{deep:!0,immediate:!0}),ie(i,()=>{const s={};i.value.forEach(l=>{s[l]=N({},n[l],{autoLink:!1,required:Oe(Q(t)[l])}),delete n[l]});for(const l in n)Object.prototype.hasOwnProperty.call(n,l)&&delete n[l];N(n,s)},{immediate:!0}),ie(e,I&&I.wait?Pt(V,I.wait,Wt(I,["wait"])):V,{immediate:r&&!!r.immediate,deep:!0}),{modelRef:e,rulesRef:t,initialModel:a,validateInfos:n,resetFields:u,validate:k,validateField:O,mergeValidateInfo:y,clearValidate:M}}const _t=()=>({layout:me.oneOf(Je("horizontal","inline","vertical")),labelCol:ne(),wrapperCol:ne(),colon:B(),labelAlign:ve(),labelWrap:B(),prefixCls:String,requiredMark:be([String,Boolean]),hideRequiredMark:B(),model:me.object,rules:ne(),validateMessages:ne(),validateOnRuleChange:B(),scrollToFirstError:Be(),onSubmit:Z(),name:String,validateTrigger:be([String,Array]),size:ve(),disabled:B(),onValuesChange:Z(),onFieldsChange:Z(),onFinish:Z(),onFinishFailed:Z(),onValidate:Z()});function Nt(e,t){return Te(ae(e),ae(t))}const Y=ze({compatConfig:{MODE:3},name:"AForm",inheritAttrs:!1,props:Ue(_t(),{layout:"horizontal",hideRequiredMark:!1,colon:!0}),Item:at,useForm:qt,setup(e,t){let{emit:r,slots:a,expose:n,attrs:i}=t;const{prefixCls:u,direction:h,form:p,size:P,disabled:O}=Xe("form",e),k=C(()=>e.requiredMark===""||e.requiredMark),M=C(()=>{var o;return k.value!==void 0?k.value:p&&((o=p.value)===null||o===void 0?void 0:o.requiredMark)!==void 0?p.value.requiredMark:!e.hideRequiredMark});Qe(P),Ye(O);const y=C(()=>{var o,g;return(o=e.colon)!==null&&o!==void 0?o:(g=p.value)===null||g===void 0?void 0:g.colon}),{validateMessages:T}=Ge(),L=C(()=>N(N(N({},Ie),T.value),e.validateMessages)),[V,I]=lt(u),x=C(()=>Ke(u.value,{[`${u.value}-${e.layout}`]:!0,[`${u.value}-hide-required-mark`]:M.value===!1,[`${u.value}-rtl`]:h.value==="rtl",[`${u.value}-${P.value}`]:P.value},I.value)),s=Me(),l={},m=(o,g)=>{l[o]=g},c=o=>{delete l[o]},f=o=>{const g=!!o,w=g?ae(o).map(ye):[];return g?Object.values(l).filter(A=>w.findIndex(_=>Nt(_,A.fieldName.value))>-1):Object.values(l)},d=o=>{e.model&&f(o).forEach(g=>{g.resetField()})},F=o=>{f(o).forEach(g=>{g.clearValidate()})},v=o=>{const{scrollToFirstError:g}=e;if(r("finishFailed",o),g&&o.errorFields.length){let w={};typeof g=="object"&&(w=g),j(o.errorFields[0].name,w)}},E=function(){return R(...arguments)},j=function(o){let g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const w=f(o?[o]:void 0);if(w.length){const A=w[0].fieldId.value,_=A?document.getElementById(A):null;_&&bt(_,N({scrollMode:"if-needed",block:"nearest"},g))}},b=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;if(o===!0){const g=[];return Object.values(l).forEach(w=>{let{namePath:A}=w;g.push(A.value)}),we(e.model,g)}else return we(e.model,o)},W=(o,g)=>{if(!e.model)return Promise.reject("Form `model` is required for validateFields to work.");const w=!!o,A=w?ae(o).map(ye):[],_=[];Object.values(l).forEach(q=>{var H;if(w||A.push(q.namePath.value),!(!((H=q.rules)===null||H===void 0)&&H.value.length))return;const S=q.namePath.value;if(!w||ot(A,S)){const z=q.validateRules(N({validateMessages:L.value},g));_.push(z.then(()=>({name:S,errors:[],warnings:[]})).catch(G=>{const U=[],K=[];return G.forEach(ee=>{let{rule:{warningOnly:te},errors:J}=ee;te?K.push(...J):U.push(...J)}),U.length?Promise.reject({name:S,errors:U,warnings:K}):{name:S,errors:U,warnings:K}}))}});const $=Se(_);s.value=$;const X=$.then(()=>s.value===$?Promise.resolve(b(A)):Promise.reject([])).catch(q=>{const H=q.filter(S=>S&&S.errors.length);return Promise.reject({values:b(A),errorFields:H,outOfDate:s.value!==$})});return X.catch(q=>q),X},R=function(){return W(...arguments)},D=o=>{o.preventDefault(),o.stopPropagation(),r("submit",o),e.model&&W().then(w=>{r("finish",w)}).catch(w=>{v(w)})};return n({resetFields:d,clearValidate:F,validateFields:W,getFieldsValue:b,validate:E,scrollToField:j}),st({model:C(()=>e.model),name:C(()=>e.name),labelAlign:C(()=>e.labelAlign),labelCol:C(()=>e.labelCol),labelWrap:C(()=>e.labelWrap),wrapperCol:C(()=>e.wrapperCol),vertical:C(()=>e.layout==="vertical"),colon:y,requiredMark:M,validateTrigger:C(()=>e.validateTrigger),rules:C(()=>e.rules),addField:m,removeField:c,onValidate:(o,g,w)=>{r("validate",o,g,w)},validateMessages:L}),ie(()=>e.rules,()=>{e.validateOnRuleChange&&W()}),()=>{var o;return V(Ze("form",ge(ge({},i),{},{onSubmit:D,class:[x.value,i.class]}),[(o=a.default)===null||o===void 0?void 0:o.call(a)]))}}});Y.useInjectFormItemContext=et;Y.ItemRest=ce;Y.install=function(e){return e.component(Y.name,Y),e.component(Y.Item.name,Y.Item),e.component(ce.name,ce),e};export{Y as F};
