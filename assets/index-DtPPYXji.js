import{d as A,N as C,ax as E,n as q,G as L,p as Z,q as I,c as a,K as r,t as u,C as p,O as o,x as f,M as d,az as N,Q as P,E as D}from"./index-CsOaHWZQ.js";import{U as G,L as S}from"./UserService-Dilay4Pq.js";import{G as V}from"./Glassmorphism-CpUjlDJt.js";import{L as h}from"./loading-BhDgLNAt.js";import{u as M}from"./debounce-fV_BjVKv.js";import{_ as R}from"./index-Del2y2bQ.js";import{I as T}from"./Search-BqZ9Hg3i.js";import{B as $}from"./index-BfPHKHhH.js";import{_ as j,F as J}from"./index-DZX6ZFdi.js";import"./Base-uFvm4X4A.js";import"./index-DC9JQhQ7.js";import"./request-zUbwgvDi.js";import"./SearchOutlined-C7J3QI4M.js";import"./Col-BAkveVXM.js";const K={class:"register"},O={class:"register-form-title"},Q=A({__name:"index",setup(Y){const{t:s}=C(),b=E(),x=M(),_=G.getInstance(),t=q({email:"",username:"",password:""}),w=n=>{h.show(),_.register(n.username,n.email,n.password).then(e=>{e.success?(d.success("Regsiter successfully!"),setTimeout(()=>{b.push({path:"/login"})},N)):d.error(e.error),h.hide()})},y=n=>{console.log(n);for(let e of n.errorFields)for(let l of e.errors)d.error(l)},v=L(()=>!(t.email&&t.password));function U(n,e){return new Promise((l,i)=>{e.length<4&&l(!1),x(()=>{_.existUserByUsername(e).then(c=>{c.data?i(!1):l(!0)})},1e3)})}function k(){t.email.length==0?d.error("Please input your email first"):_.resendConfirmationEmail(t.email)}return(n,e)=>{const l=T,i=j,c=R,B=$,g=S,F=P,z=J;return Z(),I("div",K,[a(V,{opacity:.6,"border-radius":5},{default:r(()=>[a(z,{model:t,name:"normal_register",class:"register-form","label-col":{span:6},onFinish:w,onFinishFailed:y},{default:r(()=>[u("h2",O,p(o(s)("sign_up")),1),a(i,{label:o(s)("username"),name:"username",rules:[{required:!0,message:o(s)("please_input_your_username")},{min:4,message:"Username length must large than 3"},{max:16,message:"Username length must less than 16"},{message:"Username already exist",validator:U}]},{default:r(()=>[a(l,{value:t.username,"onUpdate:value":e[0]||(e[0]=m=>t.username=m),placeholder:o(s)("username")},{prefix:r(()=>e[3]||(e[3]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["value","placeholder"])]),_:1},8,["label","rules"]),a(i,{label:o(s)("email"),name:"email",rules:[{required:!0,message:o(s)("please_input_your_email")},{pattern:/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,message:"Email address format not correct"}]},{default:r(()=>[a(l,{value:t.email,"onUpdate:value":e[1]||(e[1]=m=>t.email=m),placeholder:o(s)("email")},{prefix:r(()=>e[4]||(e[4]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["value","placeholder"])]),_:1},8,["label","rules"]),a(i,{label:o(s)("password"),name:"password",rules:[{required:!0,message:o(s)("please_input_your_password")},{min:8,max:32,message:"Password should be range (8, 32)!"},{pattern:/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,32}$/,message:"Both letters and numbers required"}]},{default:r(()=>[a(c,{value:t.password,"onUpdate:value":e[2]||(e[2]=m=>t.password=m),placeholder:o(s)("password")},{prefix:r(()=>e[5]||(e[5]=[u("i",{class:"iconfont"},"",-1)])),_:1},8,["value","placeholder"])]),_:1},8,["label","rules"]),a(i,null,{default:r(()=>[a(B,{disabled:v.value,type:"primary","html-type":"submit",class:"register-form-button"},{default:r(()=>[f(p(o(s)("sign_up")),1)]),_:1},8,["disabled"]),a(F,{justify:"space-between"},{default:r(()=>[a(g,{href:"#/login"},{default:r(()=>[f(p(o(s)("login_now")),1)]),_:1}),a(g,{type:"link",onClick:k},{default:r(()=>[f(p(o(s)("resend_confirm_email")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}}),pe=D(Q,[["__scopeId","data-v-c0afd0f8"]]);export{pe as default};
