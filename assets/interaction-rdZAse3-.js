var me=Object.defineProperty;var he=(e,t,n)=>t in e?me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>he(e,typeof t!="symbol"?t+"":t,n);import{U as w,a0 as ae,t as re,u as oe,_ as S,v as se,aD as Se,aC as ye,g as D,w as W,h as B,H as q,J as X,I as le,N as ie,j as y,aF as be,l as $,P as U,bM as xe,ce as $e,cf as Ce,z as ze,n as Pe,b2 as we,r as V,a_ as Ae,ae as ce,b4 as Be,L as Te,q as Ie,b5 as Ee,c as Y,a5 as J,F as ue,af as Oe,aG as Re,R as de,cg as ke,b7 as Ne,a7 as Me,o as De,ch as Le,ci as K,B as ee,b as _e,ag as Fe}from"./index-YXsaEbfY.js";import{u as Ge}from"./moment-CDcZZLGr.js";import{r as He}from"./index-BFSLzwoB.js";import{u as We}from"./loading-BE02Z-wR.js";function je(e){const t=w();return ae(()=>{t.value=e()},{flush:"sync"}),t}const Xe=e=>{const{antCls:t,componentCls:n,iconCls:a,avatarBg:s,avatarColor:p,containerSize:i,containerSizeLG:v,containerSizeSM:g,textFontSize:f,textFontSizeLG:d,textFontSizeSM:l,borderRadius:r,borderRadiusLG:o,borderRadiusSM:m,lineWidth:b,lineType:C}=e,c=(h,u,x)=>({width:h,height:h,lineHeight:`${h-b*2}px`,borderRadius:"50%",[`&${n}-square`]:{borderRadius:x},[`${n}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${n}-icon`]:{fontSize:u,[`> ${a}`]:{margin:0}}});return{[n]:S(S(S(S({},se(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:p,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:s,border:`${b}px ${C} transparent`,"&-image":{background:"transparent"},[`${t}-image-img`]:{display:"block"}}),c(i,f,r)),{"&-lg":S({},c(v,d,o)),"&-sm":S({},c(g,l,m)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},qe=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:a,groupSpace:s}=e;return{[`${t}-group`]:{display:"inline-flex",[`${t}`]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:a}},[`${t}-group-popover`]:{[`${t} + ${t}`]:{marginInlineStart:s}}}},pe=re("Avatar",e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,a=oe(e,{avatarBg:n,avatarColor:t});return[Xe(a),qe(a)]},e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:a,fontSize:s,fontSizeLG:p,fontSizeXL:i,fontSizeHeading3:v,marginXS:g,marginXXS:f,colorBorderBg:d}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:a,textFontSize:Math.round((p+i)/2),textFontSizeLG:v,textFontSizeSM:s,groupSpace:f,groupOverlapping:-g,groupBorderColor:d}}),ve=Symbol("AvatarContextKey"),Ue=()=>Se(ve,{}),Ve=e=>ye(ve,e),Je=()=>({prefixCls:String,shape:{type:String,default:"circle"},size:{type:[Number,String,Object],default:()=>"default"},src:String,srcset:String,icon:U.any,alt:String,gap:Number,draggable:{type:Boolean,default:void 0},crossOrigin:String,loadError:{type:Function}}),M=D({compatConfig:{MODE:3},name:"AAvatar",inheritAttrs:!1,props:Je(),slots:Object,setup(e,t){let{slots:n,attrs:a}=t;const s=w(!0),p=w(!1),i=w(1),v=w(null),g=w(null),{prefixCls:f}=W("avatar",e),[d,l]=pe(f),r=Ue(),o=B(()=>e.size==="default"?r.size:e.size),m=Ge(),b=je(()=>{if(typeof e.size!="object")return;const u=He.find(P=>m.value[P]);return e.size[u]}),C=u=>b.value?{width:`${b.value}px`,height:`${b.value}px`,lineHeight:`${b.value}px`,fontSize:`${u?b.value/2:18}px`}:{},c=()=>{if(!v.value||!g.value)return;const u=v.value.offsetWidth,x=g.value.offsetWidth;if(u!==0&&x!==0){const{gap:P=4}=e;P*2<x&&(i.value=x-P*2<u?(x-P*2)/u:1)}},h=()=>{const{loadError:u}=e;(u==null?void 0:u())!==!1&&(s.value=!1)};return q(()=>e.src,()=>{X(()=>{s.value=!0,i.value=1})}),q(()=>e.gap,()=>{X(()=>{c()})}),le(()=>{X(()=>{c(),p.value=!0})}),()=>{var u,x;const{shape:P,src:I,alt:L,srcset:E,draggable:_,crossOrigin:F}=e,R=(u=r.shape)!==null&&u!==void 0?u:P,A=ie(n,e,"icon"),z=f.value,k={[`${a.class}`]:!!a.class,[z]:!0,[`${z}-lg`]:o.value==="large",[`${z}-sm`]:o.value==="small",[`${z}-${R}`]:!0,[`${z}-image`]:I&&s.value,[`${z}-icon`]:A,[l.value]:!0},O=typeof o.value=="number"?{width:`${o.value}px`,height:`${o.value}px`,lineHeight:`${o.value}px`,fontSize:A?`${o.value/2}px`:"18px"}:{},Q=(x=n.default)===null||x===void 0?void 0:x.call(n);let N;if(I&&s.value)N=y("img",{draggable:_,src:I,srcset:E,onError:h,alt:L,crossorigin:F},null);else if(A)N=A;else if(p.value||i.value!==1){const j=`scale(${i.value}) translateX(-50%)`,ge={msTransform:j,WebkitTransform:j,transform:j},fe=typeof o.value=="number"?{lineHeight:`${o.value}px`}:{};N=y(be,{onResize:c},{default:()=>[y("span",{class:`${z}-string`,ref:v,style:S(S({},fe),ge)},[Q])]})}else N=y("span",{class:`${z}-string`,ref:v,style:{opacity:0}},[Q]);return d(y("span",$($({},a),{},{ref:g,class:k,style:[O,C(!!A),a.style]}),[N]))}}}),Ke=e=>{const{componentCls:t,popoverBg:n,popoverColor:a,width:s,fontWeightStrong:p,popoverPadding:i,boxShadowSecondary:v,colorTextHeading:g,borderRadiusLG:f,zIndexPopup:d,marginXS:l,colorBgElevated:r}=e;return[{[t]:S(S({},se(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:d,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--antd-arrow-background-color":r,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${t}-content`]:{position:"relative"},[`${t}-inner`]:{backgroundColor:n,backgroundClip:"padding-box",borderRadius:f,boxShadow:v,padding:i},[`${t}-title`]:{minWidth:s,marginBottom:l,color:g,fontWeight:p},[`${t}-inner-content`]:{color:a}})},$e(e,{colorBg:"var(--antd-arrow-background-color)"}),{[`${t}-pure`]:{position:"relative",maxWidth:"none",[`${t}-content`]:{display:"inline-block"}}}]},Ze=e=>{const{componentCls:t}=e;return{[t]:Ce.map(n=>{const a=e[`${n}-6`];return{[`&${t}-${n}`]:{"--antd-arrow-background-color":a,[`${t}-inner`]:{backgroundColor:a},[`${t}-arrow`]:{background:"transparent"}}}})}},Qe=e=>{const{componentCls:t,lineWidth:n,lineType:a,colorSplit:s,paddingSM:p,controlHeight:i,fontSize:v,lineHeight:g,padding:f}=e,d=i-Math.round(v*g),l=d/2,r=d/2-n,o=f;return{[t]:{[`${t}-inner`]:{padding:0},[`${t}-title`]:{margin:0,padding:`${l}px ${o}px ${r}px`,borderBottom:`${n}px ${a} ${s}`},[`${t}-inner-content`]:{padding:`${p}px ${o}px`}}}},Ye=re("Popover",e=>{const{colorBgElevated:t,colorText:n,wireframe:a}=e,s=oe(e,{popoverBg:t,popoverColor:n,popoverPadding:12});return[Ke(s),Ze(s),a&&Qe(s),xe(s,"zoom-big")]},e=>{let{zIndexPopupBase:t}=e;return{zIndexPopup:t+30,width:177}}),et=()=>S(S({},Ee()),{content:Y(),title:Y()}),tt=D({compatConfig:{MODE:3},name:"APopover",inheritAttrs:!1,props:Pe(et(),S(S({},we()),{trigger:"hover",placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1})),setup(e,t){let{expose:n,slots:a,attrs:s}=t;const p=V();Ae(e.visible===void 0),n({getPopupDomNode:()=>{var r,o;return(o=(r=p.value)===null||r===void 0?void 0:r.getPopupDomNode)===null||o===void 0?void 0:o.call(r)}});const{prefixCls:i,configProvider:v}=W("popover",e),[g,f]=Ye(i),d=B(()=>v.getPrefixCls()),l=()=>{var r,o;const{title:m=J((r=a.title)===null||r===void 0?void 0:r.call(a)),content:b=J((o=a.content)===null||o===void 0?void 0:o.call(a))}=e,C=!!(Array.isArray(m)?m.length:m),c=!!(Array.isArray(b)?b.length:m);return!C&&!c?null:y(ue,null,[C&&y("div",{class:`${i.value}-title`},[m]),y("div",{class:`${i.value}-inner-content`},[b])])};return()=>{const r=ce(e.overlayClassName,f.value);return g(y(Ie,$($($({},Te(e,["title","content"])),s),{},{prefixCls:i.value,ref:p,overlayClassName:r,transitionName:Be(d.value,"zoom-big",e.transitionName),"data-popover-inject":!0}),{title:l,default:a.default}))}}}),nt=ze(tt),at=()=>({prefixCls:String,maxCount:Number,maxStyle:{type:Object,default:void 0},maxPopoverPlacement:{type:String,default:"top"},maxPopoverTrigger:String,size:{type:[Number,String,Object],default:"default"},shape:{type:String,default:"circle"}}),Z=D({compatConfig:{MODE:3},name:"AAvatarGroup",inheritAttrs:!1,props:at(),setup(e,t){let{slots:n,attrs:a}=t;const{prefixCls:s,direction:p}=W("avatar",e),i=B(()=>`${s.value}-group`),[v,g]=pe(s);return ae(()=>{const f={size:e.size,shape:e.shape};Ve(f)}),()=>{const{maxPopoverPlacement:f="top",maxCount:d,maxStyle:l,maxPopoverTrigger:r="hover",shape:o}=e,m={[i.value]:!0,[`${i.value}-rtl`]:p.value==="rtl",[`${a.class}`]:!!a.class,[g.value]:!0},b=ie(n,e),C=Oe(b).map((h,u)=>Re(h,{key:`avatar-key-${u}`})),c=C.length;if(d&&d<c){const h=C.slice(0,d),u=C.slice(d,c);return h.push(y(nt,{key:"avatar-popover-key",content:u,trigger:r,placement:f,overlayClassName:`${i.value}-popover`},{default:()=>[y(M,{style:l,shape:o},{default:()=>[`+${c-d}`]})]})),v(y("div",$($({},a),{},{class:m,style:a.style}),[h]))}return v(y("div",$($({},a),{},{class:m,style:a.style}),[C]))}}});M.Group=Z;M.install=function(e){return e.component(M.name,M),e.component(Z.name,Z),e};const rt=()=>{const e=w(!1);return de(()=>{e.value=!0}),e},ot={type:{type:String},actionFn:Function,close:Function,autofocus:Boolean,prefixCls:String,buttonProps:De(),emitEvent:Boolean,quitOnNullishReturnValue:Boolean};function te(e){return!!(e&&e.then)}const mt=D({compatConfig:{MODE:3},name:"ActionButton",props:ot,setup(e,t){let{slots:n}=t;const a=w(!1),s=w(),p=w(!1);let i;const v=rt();le(()=>{e.autofocus&&(i=setTimeout(()=>{var l,r;return(r=(l=ke(s.value))===null||l===void 0?void 0:l.focus)===null||r===void 0?void 0:r.call(l)}))}),de(()=>{clearTimeout(i)});const g=function(){for(var l,r=arguments.length,o=new Array(r),m=0;m<r;m++)o[m]=arguments[m];(l=e.close)===null||l===void 0||l.call(e,...o)},f=l=>{te(l)&&(p.value=!0,l.then(function(){v.value||(p.value=!1),g(...arguments),a.value=!1},r=>(v.value||(p.value=!1),a.value=!1,Promise.reject(r))))},d=l=>{const{actionFn:r}=e;if(a.value)return;if(a.value=!0,!r){g();return}let o;if(e.emitEvent){if(o=r(l),e.quitOnNullishReturnValue&&!te(o)){a.value=!1,g(l);return}}else if(r.length)o=r(e.close),a.value=!1;else if(o=r(),!o){g();return}f(o)};return()=>{const{type:l,prefixCls:r,buttonProps:o}=e;return y(Me,$($($({},Ne(l)),{},{onClick:d,loading:p.value,prefixCls:r},o),{},{ref:s}),n)}}}),st={small:8,middle:16,large:24},lt=()=>({prefixCls:String,size:{type:[String,Number,Array]},direction:U.oneOf(ee("horizontal","vertical")).def("horizontal"),align:U.oneOf(ee("start","end","center","baseline")),wrap:_e()});function it(e){return typeof e=="string"?st[e]:e||0}const H=D({compatConfig:{MODE:3},name:"ASpace",inheritAttrs:!1,props:lt(),slots:Object,setup(e,t){let{slots:n,attrs:a}=t;const{prefixCls:s,space:p,direction:i}=W("space",e),[v,g]=Le(s),f=We(),d=B(()=>{var c,h,u;return(u=(c=e.size)!==null&&c!==void 0?c:(h=p==null?void 0:p.value)===null||h===void 0?void 0:h.size)!==null&&u!==void 0?u:"small"}),l=V(),r=V();q(d,()=>{[l.value,r.value]=(Array.isArray(d.value)?d.value:[d.value,d.value]).map(c=>it(c))},{immediate:!0});const o=B(()=>e.align===void 0&&e.direction==="horizontal"?"center":e.align),m=B(()=>ce(s.value,g.value,`${s.value}-${e.direction}`,{[`${s.value}-rtl`]:i.value==="rtl",[`${s.value}-align-${o.value}`]:o.value})),b=B(()=>i.value==="rtl"?"marginLeft":"marginRight"),C=B(()=>{const c={};return f.value&&(c.columnGap=`${l.value}px`,c.rowGap=`${r.value}px`),S(S({},c),e.wrap&&{flexWrap:"wrap",marginBottom:`${-r.value}px`})});return()=>{var c,h;const{wrap:u,direction:x="horizontal"}=e,P=(c=n.default)===null||c===void 0?void 0:c.call(n),I=J(P),L=I.length;if(L===0)return null;const E=(h=n.split)===null||h===void 0?void 0:h.call(n),_=`${s.value}-item`,F=l.value,R=L-1;return y("div",$($({},a),{},{class:[m.value,a.class],style:[C.value,a.style]}),[I.map((A,z)=>{let k=P.indexOf(A);k===-1&&(k=`$$space-${z}`);let O={};return f.value||(x==="vertical"?z<R&&(O={marginBottom:`${F/(E?2:1)}px`}):O=S(S({},z<R&&{[b.value]:`${F/(E?2:1)}px`}),u&&{paddingBottom:`${r.value}px`})),v(y(ue,{key:k},[y("div",{class:_,style:O},[A]),z<R&&E&&y("span",{class:`${_}-split`,style:O},[E])]))})])}}});H.Compact=K;H.install=function(e){return e.component(H.name,H),e.component(K.name,K),e};const T=class T{constructor(){G(this,"collection","interaction");G(this,"db");this.db=Fe.getInstance({appId:"pulse-application-tpfmdtx",cluster:"mongodb-atlas",database:"pulse-database",collection:"interaction"})}static getInstance(){return T.instance||(T.instance=new T),T.instance}async count(t={}){try{return{success:!0,data:{total:await this.db.count(this.collection,t)}}}catch(n){return{success:!1,error:n.message}}}async findInteractionById(t){try{return{success:!0,data:await this.db.findOne(this.collection,{_id:t})}}catch(n){return{success:!1,error:n.message}}}async findInteractions(t={},n={page:0,pageSize:10}){try{const[a,s]=await Promise.all([this.db.find(this.collection,t,n),this.db.count(this.collection,t)]);return{success:!0,data:{interactions:a,total:Math.ceil(s/n.pageSize)}}}catch(a){return{success:!1,error:a.message}}}async createInteraction(t){try{return{success:!0,data:await this.db.insertOne(this.collection,{...t,isDeleted:!1})}}catch(n){return{success:!1,error:n.message}}}async updateInteraction(t={},n){try{return{success:!0,data:await this.db.updateOne(this.collection,t,n)}}catch(a){return{success:!1,error:a.message}}}async updateInteractionById(t,n){try{return{success:!0,data:await this.db.updateOne(this.collection,{_id:t},n)}}catch(a){return{success:!1,error:a.message}}}async deleteInteraction(t){try{return{success:!0,data:await this.db.deleteOne(this.collection,t)}}catch(n){return{success:!1,error:n.message}}}async deleteInteractionById(t){try{return{success:!0,data:await this.db.deleteOne(this.collection,{_id:t})}}catch(n){return{success:!1,error:n.message}}}};G(T,"instance");let ne=T;var ct=(e=>(e.STAR="STAR",e.COLLECT="COLLECT",e.WATCH="WATCH",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE",e))(ct||{}),ut=(e=>(e.ARTICLE="ARTICLE",e.COMMENT="COMMENT",e))(ut||{});export{M as A,ut as C,ne as I,ct as O,nt as P,H as S,mt as a,je as e,rt as u};
